"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[574],{4101:function(t,a,e){e.d(a,{ZP:function(){return _},Wz:function(){return D}});var n=e(2791),r=n.createContext(null),i=e(184),o=e(9439),s=e(4942),c=e(1413),u=e(4166),l=e(763),d=e.p+"static/media/stations_listed.62a01fcccd6c8d8910be.csv",p=e.p+"static/media/locations_listed.f85c1cdb7238c3b3b584.csv",f=e.p+"static/media/metadata.508f1effc7264ccc4778.csv",m=e.p+"static/media/streamDetail.2db5fb2c64b18016cd7d.csv";function v(t,a){var e=a.type,n=a.path,r=a.isLoading,i=void 0!==r&&r,o=a.error,u=void 0!==o&&o,l=a.hasError,d=void 0!==l&&l,p=a.value;switch(e){case"LOADING_CHANGED":return(0,c.Z)((0,c.Z)({},t),{},(0,s.Z)({},n,(0,c.Z)((0,c.Z)({},t[n]),{},{isLoading:i})));case"VALUE_CHANGE":return(0,c.Z)((0,c.Z)({},t),{},(0,s.Z)({},n,(0,c.Z)((0,c.Z)({},t[n]),{},{value:p,isLoading:i,error:u,hasError:d})));case"INIT":return(0,c.Z)((0,c.Z)({},t),{},{isInit:p});default:throw new Error}}var g={rawData:{value:{stationData:[],locationData:[],metaData:[],streamDetail:[]}},locs:{},countries:{},events:{},loading:!1,error:!1,isInit:!1},h=0,_=function(t){var a=t.children,e=(0,n.useReducer)(v,g),s=(0,o.Z)(e,2),_=s[0],D=s[1];(0,n.useEffect)((function(){if(!h){h=1;try{console.time("Load and process data"),console.time("-Load data-"),D({type:"LOADING_CHANGED",path:"rawData",isLoading:!0}),D({type:"LOADING_CHANGED",path:"locs",isLoading:!0}),D({type:"LOADING_CHANGED",path:"countries",isLoading:!0}),Promise.all([(0,u.gyn)(d),(0,u.gyn)(p),(0,u.gyn)(f),(0,u.gyn)(m)]).then((function(t){var a=(0,o.Z)(t,4),e=a[0],n=a[1],r=a[2],i=a[3];console.timeEnd("-Load data-"),console.time("-Correct data-");var s={};n.forEach((function(t){t.lat=+t.longitude,t.long=+t.latitude,delete t.longitude,delete t.latitude,s[t.city_id]=t}));var l={};e.forEach((function(t){t.lat=s[t.city_id].lat,t.long=s[t.city_id].long,t.country=s[t.city_id].country,t.city=s[t.city_id].city,l[t.station_id]=t})),r.forEach((function(t){t.station_genre=l[t.station_id].station_genre,t.city=s[t.city_id].city,t.country=s[t.city_id].country,t.station=l[t.station_id].station,t.stream_artist=i[t.stream_detail_id].stream_artist,t.stream_title=i[t.stream_detail_id].stream_title}));var d={stationData:e,locationData:n,metaData:r,streamDetail:i,stationDataMap:l,locationDataMap:s};D({type:"VALUE_CHANGE",path:"rawData",value:d,isLoading:!1}),console.timeEnd("-Correct data-"),console.time("-filterdata-");var p=function(t){var a=t.stationData,e=t.locationData,n=t.metaData,r=(0,u.Xxj)(a,(function(t){return t.city_id}));console.time("---group meta---");var i=(0,u.ruo)(e,(function(t){return t.city_id})),o=(0,u.ruo)(n,(function(t){return t.city_id}));console.timeEnd("---group meta---");var s=r.map((function(t){var a,e,n,r=null!==(a=o.get(t[0]))&&void 0!==a?a:[],s=null!==(e=(null!==(n=i.get(t[0]))&&void 0!==n?n:[])[0])&&void 0!==e?e:{};return(0,c.Z)((0,c.Z)({},s),{},{title:"".concat(s.city," - ").concat(s.country),count:t[1].length,values:t[1],city:[[s.city,r]].map((function(t){return t.title=t[0],t.count=t[1].length,t}))})}));return s.sort((function(t,a){return a.count-t.count})),{locs:s,countries:(0,u.Xxj)(a,(function(t){return t.country})).map((function(t){return{title:t[0],long:(0,u.J69)(t[1],(function(t){return t.long})),lat:(0,u.J69)(t[1],(function(t){return t.lat})),count:t[1].length,values:t[1]}})).sort((function(t,a){return a.count-t.count}))}}(d),f=p.locs,m=p.countries;D({type:"VALUE_CHANGE",path:"locs",value:f,isLoading:!1}),D({type:"VALUE_CHANGE",path:"countries",value:m,isLoading:!1}),D({type:"VALUE_CHANGE",path:"events",value:r,isLoading:!1}),console.timeEnd("-filterdata-"),console.timeEnd("Load and process data")}))}catch(t){D({type:"ERROR",path:"rawData",isLoading:!1,error:t,hasError:!0}),D({type:"ERROR",path:"locs",isLoading:!1,error:t,hasError:!0}),D({type:"ERROR",path:"countries",isLoading:!1,error:t,hasError:!0})}}}),[]);var y=(0,n.useCallback)((function(t){return!!_[t]&&_[t].error}),[_]),E=(0,n.useCallback)((function(t){return _[t]&&_[t].value?_[t].value:[]}),[_]),L=(0,n.useCallback)((function(t){switch(t){case"City":return _.rawData&&_.rawData.value.locationData?_.rawData.value.locationData.map((function(t){return t.city})):[];case"Country":return _.countries&&_.countries.value?_.countries.value.map((function(t){return t.title})):[];case"Genre":return _.rawData&&_.rawData.value.metaData?(0,l.uniq)(_.rawData.value.metaData.map((function(t){return t.station_genre}))):[];case"Artist":return _.rawData&&_.rawData.value.streamDetail?(0,l.uniq)(_.rawData.value.streamDetail.map((function(t){return t.stream_artist}))):[];case"Song":return _.rawData&&_.rawData.value.streamDetail?(0,l.uniq)(_.rawData.value.streamDetail.map((function(t){return t.stream_song}))):[];default:return[]}}),[_]),Z=(0,n.useCallback)((function(t){return(_.events&&_.events.value?_.events.value:[]).slice(0,t)}),[_]),w=(0,n.useCallback)((function(t){var a=(_.events&&_.events.value?_.events.value:[]).find((function(a){return a.stream_detail_id===t}));return a?(0,c.Z)((0,c.Z)({},a),{},{station_description:_.rawData.value.stationDataMap[a.station_id].station_description,station_url:_.rawData.value.stationDataMap[a.station_id].station_url,lat:_.rawData.value.locationDataMap[a.city_id].lat,long:_.rawData.value.locationDataMap[a.city_id].long,url:_.rawData.value.stationDataMap[a.station_id].url,stream_song:_.rawData.value.streamDetail[a.stream_detail_id].stream_song}):null}),[_]),C=(0,n.useCallback)((function(t){return!!_[t]&&_[t].isLoading}),[_]);return(0,i.jsx)(r.Provider,{value:{getList:E,getEvents:Z,getDistinctField:L,getDetail:w,getListError:y,isLoading:C},children:a})};function D(){return(0,n.useContext)(r)}},1251:function(t,a,e){e.r(a),e.d(a,{default:function(){return P}});var n=e(2791),r=e(1413),i=e(2404),o=e(4708),s=e(1756),c=e.n(s),u=e(5321),l=e(3808),d=e.n(l),p=e(2613),f=e.n(p),m=e(6395),v=function(t,a,e,n){if(a)for(var i=0;i<a.length;i++)if(a[i].id===t){var o=a[i].source,s=null!=o&&o instanceof Function?o(e?"dark":"light"):o,c=null!=s?s.palette:{};return(0,m.Z)((0,r.Z)((0,r.Z)({},s),{},{palette:(0,r.Z)((0,r.Z)({},c),{},{mode:e?"dark":"light"}),direction:n?"rtl":"ltr"}))}return(0,m.Z)({palette:{mode:e?"dark":"light"},direction:n?"rtl":"ltr"})},g=e(8246),h=e(7012),_=e(3539),D=e(7308),y=e.n(D),E=e(8784),L=e.n(E),Z=e(8892),w=e.n(Z),C=e(3785),A=e.n(C),x=(e(4933),e(7076),e(9350),e(5224),e(184)),b=function(t){var a=t.children,e=(0,_.Z)(),n=(0,i.useConfig)().appConfig,s=(0,u.useTheme)(),l=s.themeID,p=s.isDarkMode,m=s.isRTL,D=n||{},E=D.theme,Z=D.pwa,w=D.notistack,C=Z||{},A=C.useiOSPWAPrompt,b=C.iOSPWAPromptProps,j=(E||{}).themes,M=v(l,void 0===j?[]:j,p,m);return(0,x.jsxs)(h.Z,{theme:M,children:[(0,x.jsx)(o.ZP,{}),(0,x.jsx)(g.SnackbarProvider,(0,r.Z)((0,r.Z)({maxSnack:3},w),{},{children:(0,x.jsx)(d(),{children:(0,x.jsx)(f(),{children:(0,x.jsx)(y(),{children:(0,x.jsx)(L(),{children:a})})})})})),A&&(0,x.jsx)(c(),(0,r.Z)({promptOnVisit:1,timesToShow:3,copyTitle:e.formatMessage({id:"ios_prompt_title",defaultMessage:"Add to Home Screen"}),copyClosePrompt:e.formatMessage({id:"ios_prompt_close",defaultMessage:"Close"}),copyBody:e.formatMessage({id:"ios_prompt_body",defaultMessage:"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline."}),copyShareButtonLabel:e.formatMessage({id:"ios_prompt_share_button",defaultMessage:"1) Press the 'Share' button"}),copyAddHomeButtonLabel:e.formatMessage({id:"ios_prompt_add_to_home_button",defaultMessage:"2) Press 'Add to Home Screen'"}),permanentlyHideOnDismiss:!1},b))]})};function j(t){var a=t.children,e=(0,i.useConfig)().appConfig;return(0,x.jsx)(n.Fragment,{children:(0,x.jsx)(w(),{appConfig:e,children:(0,x.jsx)(A(),{appConfig:e,children:(0,x.jsx)("div",{style:{display:"flex"},children:(0,x.jsx)(b,{children:a})})})})})}var M=e(6571),k=e(9783),G=e(4101);function N(t){var a=t.children;return(0,x.jsx)(G.ZP,{children:(0,x.jsx)(M._,{dateAdapter:k.Z,children:a})})}function P(t){var a=t.children;return(0,x.jsx)(j,{children:(0,x.jsx)(N,{children:a})})}}}]);
//# sourceMappingURL=574.bf7c8268.chunk.js.map