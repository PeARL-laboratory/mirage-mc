"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[574],{14101:function(t,a,e){e.d(a,{ZP:function(){return g},Wz:function(){return h}});var n=e(72791),r=n.createContext(null),i=e(80184),o=e(29439),s=e(4942),u=e(1413),c=e(84136),l=e(763),d=e.p+"static/media/stations_listed.62a01fcccd6c8d8910be.csv",f=e.p+"static/media/locations_listed.f85c1cdb7238c3b3b584.csv",m=e.p+"static/media/metadata.508f1effc7264ccc4778.csv",v=e.p+"static/media/streamDetail.2db5fb2c64b18016cd7d.csv";function p(t,a){var e=a.type,n=a.path,r=a.isLoading,i=void 0!==r&&r,o=a.error,c=void 0!==o&&o,l=a.hasError,d=void 0!==l&&l,f=a.value;switch(e){case"LOADING_CHANGED":return(0,u.Z)((0,u.Z)({},t),{},(0,s.Z)({},n,(0,u.Z)((0,u.Z)({},t[n]),{},{isLoading:i})));case"VALUE_CHANGE":return(0,u.Z)((0,u.Z)({},t),{},(0,s.Z)({},n,(0,u.Z)((0,u.Z)({},t[n]),{},{value:f,isLoading:i,error:c,hasError:d})));case"INIT":return(0,u.Z)((0,u.Z)({},t),{},{isInit:f});default:throw new Error}}var D={rawData:{value:{stationData:[],locationData:[],metaData:[],streamDetail:[]}},locs:{},countries:{},events:{},loading:!1,error:!1,isInit:!1},g=function(t){var a=t.children,e=(0,n.useReducer)(p,D),s=(0,o.Z)(e,2),g=s[0],h=s[1];(0,n.useEffect)((function(){if(!g.rawData.isLoading&&!g.rawData.value.metaData.length){1;try{console.time("Load and process data"),console.time("-Load data-"),h({type:"LOADING_CHANGED",path:"rawData",isLoading:!0}),h({type:"LOADING_CHANGED",path:"locs",isLoading:!0}),h({type:"LOADING_CHANGED",path:"countries",isLoading:!0}),Promise.all([(0,c.gyn)(d),(0,c.gyn)(f),(0,c.gyn)(m),(0,c.gyn)(v)]).then((function(t){var a=(0,o.Z)(t,4),e=a[0],n=a[1],r=a[2],i=a[3];console.timeEnd("-Load data-"),console.time("-Correct data-");var s={};n.forEach((function(t){t.lat=+t.longitude,t.long=+t.latitude,delete t.longitude,delete t.latitude,s[t.city_id]=t}));var l={};e.forEach((function(t){t.lat=s[t.city_id].lat,t.long=s[t.city_id].long,t.country=s[t.city_id].country,t.city=s[t.city_id].city,l[t.station_id]=t})),r.forEach((function(t){t.station_genre=l[t.station_id].station_genre,t.city=s[t.city_id].city,t.country=s[t.city_id].country,t.station=l[t.station_id].station,t.stream_artist=i[t.stream_detail_id].stream_artist,t.stream_song=i[t.stream_detail_id].stream_song}));var d={stationData:e,locationData:n,metaData:r,streamDetail:i,stationDataMap:l,locationDataMap:s};h({type:"VALUE_CHANGE",path:"rawData",value:d,isLoading:!1}),console.timeEnd("-Correct data-"),console.time("-filterdata-");var f=function(t){var a=t.stationData,e=t.locationData,n=t.metaData,r=(0,c.Xxj)(a,(function(t){return t.city_id}));console.time("---group meta---");var i=(0,c.ruo)(e,(function(t){return t.city_id})),o=(0,c.ruo)(n,(function(t){return t.city_id}));console.timeEnd("---group meta---");var s=r.map((function(t){var a,e,n,r=null!==(a=o.get(t[0]))&&void 0!==a?a:[],s=null!==(e=(null!==(n=i.get(t[0]))&&void 0!==n?n:[])[0])&&void 0!==e?e:{};return(0,u.Z)((0,u.Z)({},s),{},{title:"".concat(s.city," - ").concat(s.country),count:t[1].length,values:t[1],city:[[s.city,r]].map((function(t){return t.title=t[0],t.count=t[1].length,t}))})}));return s.sort((function(t,a){return a.count-t.count})),{locs:s,countries:(0,c.Xxj)(a,(function(t){return t.country})).map((function(t){return{title:t[0],long:(0,c.J69)(t[1],(function(t){return t.long})),lat:(0,c.J69)(t[1],(function(t){return t.lat})),count:t[1].length,values:t[1]}})).sort((function(t,a){return a.count-t.count}))}}(d),m=f.locs,v=f.countries;h({type:"VALUE_CHANGE",path:"locs",value:m,isLoading:!1}),h({type:"VALUE_CHANGE",path:"countries",value:v,isLoading:!1}),console.timeEnd("-filterdata-"),console.timeEnd("Load and process data")}))}catch(t){h({type:"ERROR",path:"rawData",isLoading:!1,error:t,hasError:!0}),h({type:"ERROR",path:"locs",isLoading:!1,error:t,hasError:!0}),h({type:"ERROR",path:"countries",isLoading:!1,error:t,hasError:!0})}}}),[]);var _=(0,n.useCallback)((function(t){return!!g[t]&&g[t].error}),[g]),y=(0,n.useCallback)((function(t){return g[t]&&g[t].value?g[t].value:[]}),[g]),w=(0,n.useCallback)((function(t){switch(t){case"city":return g.rawData&&g.rawData.value.locationData?g.rawData.value.locationData.map((function(t){return t.city})):[];case"country":return g.countries&&g.countries.value?g.countries.value.map((function(t){return t.title})):[];case"station":return g.rawData&&g.rawData.value.stationData?(0,l.uniq)(g.rawData.value.stationData.map((function(t){return t.station}))):[];case"station_genre":return g.rawData&&g.rawData.value.metaData?(0,l.uniq)(g.rawData.value.metaData.map((function(t){return t.station_genre}))):[];case"stream_artist":return g.rawData&&g.rawData.value.streamDetail?(0,l.uniq)(g.rawData.value.streamDetail.map((function(t){return t.stream_artist}))):[];case"stream_song":return g.rawData&&g.rawData.value.streamDetail?(0,l.uniq)(g.rawData.value.streamDetail.map((function(t){return t.stream_song}))):[];default:return[]}}),[g]),E=(0,n.useCallback)((function(){return g.events&&g.events.value?g.events.value:[]}),[g]),L=(0,n.useCallback)((function(t,a){h({type:"LOADING_CHANGED",path:"events",isLoading:!0}),new Promise((function(e,n){var r,i=(null!==(r=g.rawData.value)&&void 0!==r?r:{metaData:[]}).metaData.slice();Object.keys(t).forEach((function(a){t[a]&&i.length&&((0,l.isArray)(t[a])?t[a].length&&(i=i.filter((function(e){return t[a].find((function(t){return t===e[a]}))}))):t[a]&&(i=i.filter((function(e){return e[a]===t[a]}))))}));var o=i.slice(0,a);h({type:"VALUE_CHANGE",path:"events",value:o,isLoading:!1}),e(o)}))}),[g]),Z=(0,n.useCallback)((function(t){var a=(g.events&&g.events.value?g.events.value:[]).find((function(a){return a.stream_detail_id===t}));return a?C(a,g.rawData.value.stationDataMap,g.rawData.value.locationDataMap,g.rawData.value.streamDetail):null}),[g]);function C(t,a,e,n){return(0,u.Z)((0,u.Z)({},t),{},{station_description:a[t.station_id].station_description,station_url:a[t.station_id].station_url,lat:e[t.city_id].lat,long:e[t.city_id].long,url:a[t.station_id].url},n[t.stream_detail_id])}var A=(0,n.useCallback)((function(t){var a;if(t){var e,n=(null!==(e=g.rawData.value)&&void 0!==e?e:{metaData:[]}).metaData;return t.sort((function(t,a){return t-a})).map((function(t){return C(n[t],g.rawData.value.stationDataMap,g.rawData.value.locationDataMap,g.rawData.value.streamDetail)}))}return(null!==(a=g.rawData.value)&&void 0!==a?a:{metaData:[]}).metaData.map((function(t){return C(t,g.rawData.value.stationDataMap,g.rawData.value.locationDataMap,g.rawData.value.streamDetail)}))}),[g]),b=(0,n.useCallback)((function(t){return!!g[t]&&g[t].isLoading}),[g]);return(0,i.jsx)(r.Provider,{value:{getList:y,getEvents:E,requestEvents:L,getDistinctField:w,getDetail:Z,getListError:_,getDownloadData:A,isLoading:b},children:a})};function h(){return(0,n.useContext)(r)}},91251:function(t,a,e){e.r(a),e.d(a,{default:function(){return P}});var n=e(72791),r=e(1413),i=e(42404),o=e(4708),s=e(21756),u=e.n(s),c=e(95321),l=e(33808),d=e.n(l),f=e(62613),m=e.n(f),v=e(36395),p=function(t,a,e,n){if(a)for(var i=0;i<a.length;i++)if(a[i].id===t){var o=a[i].source,s=null!=o&&o instanceof Function?o(e?"dark":"light"):o,u=null!=s?s.palette:{};return(0,v.Z)((0,r.Z)((0,r.Z)({},s),{},{palette:(0,r.Z)((0,r.Z)({},u),{},{mode:e?"dark":"light"}),direction:n?"rtl":"ltr"}))}return(0,v.Z)({palette:{mode:e?"dark":"light"},direction:n?"rtl":"ltr"})},D=e(98246),g=e(57012),h=e(93539),_=e(27308),y=e.n(_),w=e(78784),E=e.n(w),L=e(98892),Z=e.n(L),C=e(83785),A=e.n(C),b=(e(94933),e(7076),e(29350),e(45224),e(80184)),x=function(t){var a=t.children,e=(0,h.Z)(),n=(0,i.useConfig)().appConfig,s=(0,c.useTheme)(),l=s.themeID,f=s.isDarkMode,v=s.isRTL,_=n||{},w=_.theme,L=_.pwa,Z=_.notistack,C=L||{},A=C.useiOSPWAPrompt,x=C.iOSPWAPromptProps,j=(w||{}).themes,k=p(l,void 0===j?[]:j,f,v);return(0,b.jsxs)(g.Z,{theme:k,children:[(0,b.jsx)(o.ZP,{}),(0,b.jsx)(D.SnackbarProvider,(0,r.Z)((0,r.Z)({maxSnack:3},Z),{},{children:(0,b.jsx)(d(),{children:(0,b.jsx)(m(),{children:(0,b.jsx)(y(),{children:(0,b.jsx)(E(),{children:a})})})})})),A&&(0,b.jsx)(u(),(0,r.Z)({promptOnVisit:1,timesToShow:3,copyTitle:e.formatMessage({id:"ios_prompt_title",defaultMessage:"Add to Home Screen"}),copyClosePrompt:e.formatMessage({id:"ios_prompt_close",defaultMessage:"Close"}),copyBody:e.formatMessage({id:"ios_prompt_body",defaultMessage:"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline."}),copyShareButtonLabel:e.formatMessage({id:"ios_prompt_share_button",defaultMessage:"1) Press the 'Share' button"}),copyAddHomeButtonLabel:e.formatMessage({id:"ios_prompt_add_to_home_button",defaultMessage:"2) Press 'Add to Home Screen'"}),permanentlyHideOnDismiss:!1},x))]})};function j(t){var a=t.children,e=(0,i.useConfig)().appConfig;return(0,b.jsx)(n.Fragment,{children:(0,b.jsx)(Z(),{appConfig:e,children:(0,b.jsx)(A(),{appConfig:e,children:(0,b.jsx)("div",{style:{display:"flex"},children:(0,b.jsx)(x,{children:a})})})})})}var k=e(36571),M=e(69783),N=e(14101);function G(t){var a=t.children;return(0,b.jsx)(N.ZP,{children:(0,b.jsx)(k._,{dateAdapter:M.Z,children:a})})}function P(t){var a=t.children;return(0,b.jsx)(j,{children:(0,b.jsx)(G,{children:a})})}}}]);
//# sourceMappingURL=574.f057aae1.chunk.js.map