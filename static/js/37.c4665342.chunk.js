"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[37],{14101:function(t,e,n){n.d(e,{ZP:function(){return m},Wz:function(){return x}});var a=n(72791),i=a.createContext(null),r=n(80184),o=n(29439),l=n(4942),s=n(1413),c=n(84136),u=n(763),d=n.p+"static/media/stations_listed.62a01fcccd6c8d8910be.csv",f=n.p+"static/media/locations_listed.f85c1cdb7238c3b3b584.csv",h=n.p+"static/media/metadata.508f1effc7264ccc4778.csv",g=n.p+"static/media/streamDetail.2db5fb2c64b18016cd7d.csv";function v(t,e){var n=e.type,a=e.path,i=e.isLoading,r=void 0!==i&&i,o=e.error,c=void 0!==o&&o,u=e.hasError,d=void 0!==u&&u,f=e.value;switch(n){case"LOADING_CHANGED":return(0,s.Z)((0,s.Z)({},t),{},(0,l.Z)({},a,(0,s.Z)((0,s.Z)({},t[a]),{},{isLoading:r})));case"VALUE_CHANGE":return(0,s.Z)((0,s.Z)({},t),{},(0,l.Z)({},a,(0,s.Z)((0,s.Z)({},t[a]),{},{value:f,isLoading:r,error:c,hasError:d})));case"INIT":return(0,s.Z)((0,s.Z)({},t),{},{isInit:f});default:throw new Error}}var p={rawData:{value:{stationData:[],locationData:[],metaData:[],streamDetail:[]}},locs:{},countries:{},events:{},loading:!1,error:!1,isInit:!1},m=function(t){var e=t.children,n=(0,a.useReducer)(v,p),l=(0,o.Z)(n,2),m=l[0],x=l[1];(0,a.useEffect)((function(){if(!m.rawData.isLoading&&!m.rawData.value.metaData.length){1;try{console.time("Load and process data"),console.time("-Load data-"),x({type:"LOADING_CHANGED",path:"rawData",isLoading:!0}),x({type:"LOADING_CHANGED",path:"locs",isLoading:!0}),x({type:"LOADING_CHANGED",path:"countries",isLoading:!0}),Promise.all([(0,c.gyn)(d),(0,c.gyn)(f),(0,c.gyn)(h),(0,c.gyn)(g)]).then((function(t){var e=(0,o.Z)(t,4),n=e[0],a=e[1],i=e[2],r=e[3];console.timeEnd("-Load data-"),console.time("-Correct data-");var l={};a.forEach((function(t){t.lat=+t.longitude,t.long=+t.latitude,delete t.longitude,delete t.latitude,l[t.city_id]=t}));var u={};n.forEach((function(t){t.lat=l[t.city_id].lat,t.long=l[t.city_id].long,t.country=l[t.city_id].country,t.city=l[t.city_id].city,u[t.station_id]=t})),i.forEach((function(t){t.station_genre=u[t.station_id].station_genre,t.city=l[t.city_id].city,t.country=l[t.city_id].country,t.station=u[t.station_id].station,t.stream_artist=r[t.stream_detail_id].stream_artist,t.stream_song=r[t.stream_detail_id].stream_song}));var d={stationData:n,locationData:a,metaData:i,streamDetail:r,stationDataMap:u,locationDataMap:l};x({type:"VALUE_CHANGE",path:"rawData",value:d,isLoading:!1}),console.timeEnd("-Correct data-"),console.time("-filterdata-");var f=function(t){var e=t.stationData,n=t.locationData,a=t.metaData,i=(0,c.Xxj)(e,(function(t){return t.city_id}));console.time("---group meta---");var r=(0,c.ruo)(n,(function(t){return t.city_id})),o=(0,c.ruo)(a,(function(t){return t.city_id}));console.timeEnd("---group meta---");var l=i.map((function(t){var e,n,a,i=null!==(e=o.get(t[0]))&&void 0!==e?e:[],l=null!==(n=(null!==(a=r.get(t[0]))&&void 0!==a?a:[])[0])&&void 0!==n?n:{};return(0,s.Z)((0,s.Z)({},l),{},{title:"".concat(l.city," - ").concat(l.country),count:t[1].length,values:t[1],city:[[l.city,i]].map((function(t){return t.title=t[0],t.count=t[1].length,t}))})}));return l.sort((function(t,e){return e.count-t.count})),{locs:l,countries:(0,c.Xxj)(e,(function(t){return t.country})).map((function(t){return{title:t[0],long:(0,c.J69)(t[1],(function(t){return t.long})),lat:(0,c.J69)(t[1],(function(t){return t.lat})),count:t[1].length,values:t[1]}})).sort((function(t,e){return e.count-t.count}))}}(d),h=f.locs,g=f.countries;x({type:"VALUE_CHANGE",path:"locs",value:h,isLoading:!1}),x({type:"VALUE_CHANGE",path:"countries",value:g,isLoading:!1}),console.timeEnd("-filterdata-"),console.timeEnd("Load and process data")}))}catch(t){x({type:"ERROR",path:"rawData",isLoading:!1,error:t,hasError:!0}),x({type:"ERROR",path:"locs",isLoading:!1,error:t,hasError:!0}),x({type:"ERROR",path:"countries",isLoading:!1,error:t,hasError:!0})}}}),[]);var b=(0,a.useCallback)((function(t){return!!m[t]&&m[t].error}),[m]),y=(0,a.useCallback)((function(t){return m[t]&&m[t].value?m[t].value:[]}),[m]),j=(0,a.useCallback)((function(t){switch(t){case"city":return m.rawData&&m.rawData.value.locationData?m.rawData.value.locationData.map((function(t){return t.city})):[];case"country":return m.countries&&m.countries.value?m.countries.value.map((function(t){return t.title})):[];case"station":return m.rawData&&m.rawData.value.stationData?(0,u.uniq)(m.rawData.value.stationData.map((function(t){return t.station}))):[];case"station_genre":return m.rawData&&m.rawData.value.metaData?(0,u.uniq)(m.rawData.value.metaData.map((function(t){return t.station_genre}))):[];case"stream_artist":return m.rawData&&m.rawData.value.streamDetail?(0,u.uniq)(m.rawData.value.streamDetail.map((function(t){return t.stream_artist}))):[];case"stream_song":return m.rawData&&m.rawData.value.streamDetail?(0,u.uniq)(m.rawData.value.streamDetail.map((function(t){return t.stream_song}))):[];default:return[]}}),[m]),D=(0,a.useCallback)((function(){return m.events&&m.events.value?m.events.value:[]}),[m]),Z=(0,a.useCallback)((function(t,e){x({type:"LOADING_CHANGED",path:"events",isLoading:!0}),new Promise((function(n,a){var i,r=(null!==(i=m.rawData.value)&&void 0!==i?i:{metaData:[]}).metaData.slice();Object.keys(t).forEach((function(e){t[e]&&r.length&&((0,u.isArray)(t[e])?t[e].length&&(r=r.filter((function(n){return t[e].find((function(t){return t===n[e]}))}))):t[e]&&(r=r.filter((function(n){return n[e]===t[e]}))))}));var o=r.slice(0,e);x({type:"VALUE_CHANGE",path:"events",value:o,isLoading:!1}),n(o)}))}),[m]),w=(0,a.useCallback)((function(t){var e=(m.events&&m.events.value?m.events.value:[]).find((function(e){return e.stream_detail_id===t}));return e?_(e,m.rawData.value.stationDataMap,m.rawData.value.locationDataMap,m.rawData.value.streamDetail):null}),[m]);function _(t,e,n,a){return(0,s.Z)((0,s.Z)({},t),{},{station_description:e[t.station_id].station_description,station_url:e[t.station_id].station_url,lat:n[t.city_id].lat,long:n[t.city_id].long,url:e[t.station_id].url},a[t.stream_detail_id])}var C=(0,a.useCallback)((function(t){var e;if(t){var n,a=(null!==(n=m.rawData.value)&&void 0!==n?n:{metaData:[]}).metaData;return t.sort((function(t,e){return t-e})).map((function(t){return _(a[t],m.rawData.value.stationDataMap,m.rawData.value.locationDataMap,m.rawData.value.streamDetail)}))}return(null!==(e=m.rawData.value)&&void 0!==e?e:{metaData:[]}).metaData.map((function(t){return _(t,m.rawData.value.stationDataMap,m.rawData.value.locationDataMap,m.rawData.value.streamDetail)}))}),[m]),k=(0,a.useCallback)((function(t){return!!m[t]&&m[t].isLoading}),[m]);return(0,r.jsx)(i.Provider,{value:{getList:y,getEvents:D,requestEvents:Z,getDistinctField:j,getDetail:w,getListError:b,getDownloadData:C,isLoading:k},children:e})};function x(){return(0,a.useContext)(i)}},78305:function(t,e,n){n.d(e,{X:function(){return a},e:function(){return i}});var a=[{accessorKey:"city",header:"City"},{accessorKey:"country",header:"Country"},{accessorKey:"station",header:"Station"},{accessorKey:"station_genre",header:"Station Genre"},{accessorKey:"stream_artist",header:"Artist"},{accessorKey:"stream_song",header:"Song"},{accessorKey:"time_station",header:"Time",type:"time",filterDisable:!0}],i=a.filter((function(t){return!t.filterDisable}))},26719:function(t,e,n){n.d(e,{x:function(){return o}});var a=n(1413),i=n(36395),r=n(84136);function o(t){var e=(0,r.$_Y)(t);return e.opacity=.5,e.toString()}e.Z=function(t,e,n,r){if(e)for(var o=0;o<e.length;o++)if(e[o].id===t){var l=e[o].source,s=null!=l&&l instanceof Function?l(n?"dark":"light"):l,c=null!=s?s.palette:{};return(0,i.Z)((0,a.Z)((0,a.Z)({},s),{},{palette:(0,a.Z)((0,a.Z)({},c),{},{mode:n?"dark":"light"}),direction:r?"rtl":"ltr"}))}return(0,i.Z)({palette:{mode:n?"dark":"light"},direction:r?"rtl":"ltr"})}},28605:function(t,e,n){n.r(e),n.d(e,{default:function(){return ut}});var a=n(29439),i=n(72791),r=n(93539),o=n(1413),l=n(95321),s=n(74350),c=n(13967),u=n(42404),d=n(24003),f=n(25256),h=n(29464),g=n(90977),v=n(4567),p=n(40986),m=n(7607),x=n(99631),b=n(80184);function y(t){var e=t.children,n=t.pageTitle,a=t.onBackClick,y=t.isLoading,j=t.appBarContent,D=void 0===j?null:j,Z=t.contentStyle,w=t.tabs,_=void 0===w?null:w,C=(0,l.useTheme)().isRTL,k=(0,d.useOnline)(),E=(0,c.Z)(),L=((0,u.useConfig)().appConfig||{}).menu||{},R=L.width,S=void 0===R?240:R,A=L.appBarLeadingContent,I=void 0===A?null:A,M=(0,i.useContext)(s.default),P=M.toggleThis,z=M.isDesktop,T=M.isMenuOpen,G=(0,r.Z)(),H="";("string"===typeof n||n instanceof String)&&(H=n);return(0,b.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[(0,b.jsx)(f.Z,{position:z?"absolute":void 0,sx:{width:T&&z?"calc(100% - ".concat(S,"px)"):void 0,zIndex:E.zIndex.drawer,transition:E.transitions.create(["width","margin"],{easing:E.transitions.easing.sharp,duration:E.transitions.duration.leavingScreen}),maxHeight:64,marginLeft:C?0:-12,marginRight:C?30:0,backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},children:(0,b.jsxs)(h.Z,{children:[T&&z||!a&&(0,b.jsx)(g.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){T?P("isMobileMenuOpen"):(P("isMiniMode",!1),P("isMenuOpen",!0),z||P("isMobileMenuOpen"))},edge:"start",children:(0,b.jsx)(m.Z,{})}),a&&(0,b.jsx)(g.Z,{color:"inherit","aria-label":"open drawer",onClick:a,children:(0,b.jsx)(x.Z,{})}),!a&&T&&!1,I,(0,b.jsx)(v.Z,{variant:"h6",color:"inherit",noWrap:!0,children:H}),(0,b.jsx)("div",{style:{flex:"1 1 auto"}}),D]})}),(0,b.jsx)("div",{style:{alignItems:"center",justifyContent:"flex-end",minHeight:64}}),y&&(0,b.jsx)(p.Z,{}),!k&&(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",height:15,backgroundColor:E.palette.secondary.main},children:(0,b.jsx)(v.Z,{variant:"caption",color:"textSecondary",noWrap:!0,children:G.formatMessage({id:"offline",defaultMessage:"Offline"})})}),_,(0,b.jsx)("div",{style:(0,o.Z)({flex:1,overflow:"auto"},Z),children:e})]})}var j=n(14101),D=n(34729),Z=n(67414),w=n(88588),_=n(22492),C=n(18060),k=n(64554),E=n.p+"static/media/earth-night.da273783100dfbfd07c0.jpg",L=n(51692),R=n(84136),S=n(96174),A=n(65469),I=n(94721),M=n(60220),P=n(72426),z=n.n(P),T=n(14642);var G=function(t){var e=t.data,n=t.onSelect;return(0,b.jsx)(w.Z,{sx:{height:"100%",overflowY:"auto"},children:(0,b.jsxs)(_.Z,{children:[(0,b.jsx)(v.Z,{component:"div",variant:"h2",onClick:function(){return n({station:[e.station]},e)},children:e.station}),(0,b.jsx)(v.Z,{component:"div",variant:"subtitle1",color:"text.secondary",children:e.station_description}),(0,b.jsxs)("table",{style:{width:"100%"},children:[(0,b.jsxs)("colgroup",{children:[(0,b.jsx)("col",{style:{width:130}}),(0,b.jsx)("col",{})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Station Genre"}),(0,b.jsx)("td",{children:e.station_genre})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Station URL"}),(0,b.jsx)("td",{children:(0,b.jsx)(A.Z,{href:e.station_url,target:"_blank",color:"secondary",children:e.station_url})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Location"}),(0,b.jsx)("td",{children:(0,b.jsxs)(A.Z,{target:"_blank",color:"secondary",href:"https://maps.google.com/?q=".concat(e.lat,",").concat(e.long),children:[(0,b.jsx)(T.Z,{}),e.city,", ",e.country]})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Radio Garden URL"}),(0,b.jsx)("td",{children:(0,b.jsx)(A.Z,{href:e.url,target:"_blank",color:"secondary",children:e.station_url})})]}),(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colspan:"2",children:(0,b.jsx)(I.Z,{sx:{mt:2,mb:2}})})}),(0,b.jsxs)("tr",{onClick:function(){return n({stream_artist:[e.stream_artist]})},children:[(0,b.jsx)("td",{children:"Artist"}),(0,b.jsxs)("td",{style:{display:"flex"},children:[(0,b.jsx)(M.Z,{"aria-label":"recipe",sx:{mr:1},children:e.stream_artist[0]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(v.Z,{variant:"h5",color:"text.primary",children:e.stream_artist}),(0,b.jsx)(v.Z,{variant:"subtitle2",children:"N/A"})]})]})]}),(0,b.jsxs)("tr",{onClick:function(){return n({stream_song:[e.stream_song]})},children:[(0,b.jsx)("td",{children:"Song"}),(0,b.jsx)("td",{children:e.stream_song})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Time Monitored"}),(0,b.jsx)("td",{children:z()(e.time_station).format("LLL")})]})]})]})})},H=n(26719),N=(n(28920),["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]),O=R.BYU().range([.01,.7]),B=R.BYU().range([.1,.7]),U=(0,i.forwardRef)((function(t,e){var n=t.locs,r=t.countries,o=t.width,l=t.height,s=t.onSelect,c=t.zoomLoc,u=t.legendHolderRef,d=(0,i.useRef)(),f=(0,i.useState)("country"),h=(0,a.Z)(f,2),g=h[0],p=(h[1],(0,i.useState)()),m=(0,a.Z)(p,2),x=m[0],y=(m[1],(0,i.useState)(0)),j=(0,a.Z)(y,2),D=j[0],Z=j[1],C=(0,i.useState)([{lat:-92.52824601944323,lng:38.31079101844495,altitude:1.8},{lat:51.58421865,lng:45.9571029,altitude:1.8},{lat:31.3037101,lng:-89.29276214,altitude:1.8},{lat:33.5842591,lng:-101.8804709,altitude:1.8}]),k=(0,a.Z)(C,2),A=k[0],I=k[1],M=(0,i.useState)([]),P=(0,a.Z)(M,2),z=P[0],T=P[1],G=(0,i.useState)({}),U=(0,a.Z)(G,2),F=U[0],V=U[1],W=(0,i.useMemo)((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#454545",e=R.PKp(N),n=function(n){if(!n||""===n||""===n.trim)return"black";var a=e.domain();return a.find((function(t){return t===n}))||a.length<20?e(n):t};return n.domain=e.domain,n.range=e.range,n}()}),[]);function q(t){var e=t.locs,n=t.countries,a={},i=R.Wem(e,(function(t){return t.count}));O.domain(i),B.domain(R.Wem(n,(function(t){return a[t.title]=t,t.count}))),W.domain([]).range(N),n.forEach((function(t){return W(t.title)}));var r=0;return n.length>3&&[0,1,2,3,0].forEach((function(t){A[r]||(A[r]={lat:0,lng:0,altitude:1}),A[r].lat=n[t].lat,A[r].lng=n[t].long,r++})),{MAP_CENTERs:A,contriesMap:a}}(0,i.useEffect)((function(){var t=q({locs:n,countries:r}),e=t.MAP_CENTERs,a=t.contriesMap;V(a),I(e),c||Z(0)}),[n,r]);var K=(0,i.useState)(null),Y=(0,a.Z)(K,2),X=Y[0],J=Y[1];(0,i.useEffect)((function(){if(d.current&&D<A.length){var t=setTimeout((function(){d.current.pointOfView(A[D],4e3),Z(D+1)}),4e3);return J(t),function(){clearInterval(t)}}}),[D,A]);var $=(0,i.useCallback)((function(){X&&clearInterval(X),Z(A.length)}),[X]),Q=(0,i.useState)(null),tt=(0,a.Z)(Q,2),et=tt[0],nt=tt[1],at=(0,i.useCallback)((function(t,e){if(d.current){$(),d.current.pointOfView({lat:e,lng:t,altitude:1.2},2e3),T([{lng:t,lat:e}]),et&&clearInterval(et);var n=setTimeout((function(){T([])}),1e4);nt(n)}}),[D,$,et]);return(0,i.useEffect)((function(){return c&&at(c.lng,c.lat),function(){et&&clearInterval(et)}}),[c]),(0,b.jsxs)("div",{style:{background:"#000010",position:"relative"},children:[(0,b.jsx)("div",{style:{transform:"translate(0, -20%)",height:"100vh"},children:(0,b.jsx)(L.Z,{width:o,height:l,ref:d,globeImageUrl:E,ringsData:z,ringColor:function(){return"#D39F49"},ringResolution:1e3,ringMaxRadius:5,ringPropagationSpeed:5,ringRepeatPeriod:500,labelsData:r,labelLat:(0,i.useCallback)((function(t){return t.lat}),[]),labelLng:(0,i.useCallback)((function(t){return t.long}),[]),labelAltitude:(0,i.useCallback)((function(t){return x&&x.title===t.title?.15:.1}),[x]),labelText:(0,i.useCallback)((function(t){return t.title}),[]),labelSize:(0,i.useCallback)((function(t){return O(t.count)/3}),[]),labelDotRadius:0,labelColor:(0,i.useCallback)((function(t){var e;return x&&x.title===t.title?"#dd6700":null!==(e=t.color)&&void 0!==e?e:"white"}),[x]),labelResolution:2,hexBinPointsData:n,hexBinPointWeight:"count",hexBinPointLng:(0,i.useCallback)((function(t){return t.long}),[]),hexBinPointLat:(0,i.useCallback)((function(t){return t.lat}),[]),hexAltitude:(0,i.useCallback)((function(t){return O(t.sumWeight)}),[]),hexBinResolution:4,hexTopColor:(0,i.useCallback)((function(t){return W(t.points[0][g])}),[]),hexSideColor:(0,i.useCallback)((function(t){return W(t.points[0][g])}),[]),hexBinMerge:!1,hexLabel:(0,i.useCallback)((function(t){return'<div class="overlay-holder">\n            <div class="overlay-header">\n                <span><b>'.concat(R.Smz(t.points,(function(t){return t.count})),'</b> stations</span>\n            </div>\n            <div class="overlay-content">\n            <table>\n                <tbody><tr>').concat(t.points.slice().sort((function(t,e){return e.count-t.count})).map((function(t){return"<td>[".concat(t.count,"]</td><td>").concat(t.title,"</td>")})).join("</tr><tr>"),"</tr></tbody>\n            </table>\n            </div>\n          </div>")}),[]),onHexClick:function(t){var e=[];t.points.forEach((function(t){t.city.forEach((function(t){return e.push(t[0])}))})),s({city:e,country:[t.points[0].country]})},onGlobeClick:$})}),u&&(0,b.jsx)(S.Z,{container:u.current,children:(0,b.jsx)(w.Z,{sx:{pointerEvents:"all",overflowY:"auto",backgroundColor:function(t){return(0,H.x)(t.palette.background.paper)}},children:(0,b.jsx)(_.Z,{children:W.domain().map((function(t){return(0,b.jsxs)(v.Z,{variant:"subtitle2",onClick:function(){s({country:[t]}),F[t]&&at(F[t].long,F[t].lat)},children:[(0,b.jsx)("div",{style:{width:10,height:10,backgroundColor:W(t),display:"inline-block",marginRight:5}}),t]},t)}))})})})]})})),F=U,V=n(56525),W=n(19628),q=n(78305),K=n(5849),Y=n(65560),X=n(76730),J=function(t){var e=t.data,n=t.onSelectRow,r=t.highlightId,o=q.X,l=(0,i.useRef)(null),s=(0,i.useState)(!1),c=(0,a.Z)(s,2),u=c[0],d=c[1],f=(0,i.useState)([]),h=(0,a.Z)(f,2),g=h[0],v=h[1],p=(0,j.Wz)().getDownloadData;(0,i.useEffect)((function(){var t;null===(t=l.current)||void 0===t||t.scrollToIndex(0)}),[g]);return(0,b.jsx)(W.ZP,{columns:o,data:e,enableBottomToolbar:!1,enableGlobalFilterModes:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,muiTableContainerProps:{sx:{maxHeight:"300px"}},initialState:{density:"compact"},onSortingChange:v,state:{isLoading:u,sorting:g},rowVirtualizerInstanceRef:l,rowVirtualizerProps:{overscan:8},muiTableBodyRowProps:function(t){var e=t.row;return{onClick:function(){n(e.original)},sx:{cursor:"pointer",opacity:r?r.stream_detail_id===e.original.stream_detail_id?1:.7:1}}},enableColumnResizing:!0,defaultColumn:{minSize:20,maxSize:9001,size:100},renderTopToolbarCustomActions:function(t){var e=t.table;return(0,b.jsxs)(k.Z,{sx:{display:"flex",gap:"1rem",p:"0.5rem",flexWrap:"wrap"},children:[(0,b.jsx)(K.Z,{color:"primary",target:"_blank",href:"https://texastechuniversity-my.sharepoint.com/:x:/g/personal/ngan_v_t_nguyen_ttu_edu/EWEu7l96MQ1Jgu8OBKspIR0BjmY1i0t6XlV6ROPCYcPkkA?download=1",startIcon:(0,b.jsx)(Y.Z,{}),variant:"contained",children:"Download All Data"}),(0,b.jsx)(K.Z,{disabled:0===e.getPrePaginationRowModel().rows.length,onClick:function(){return function(t){d(!0);var e=p(t.map((function(t){return t.original.stream_detail_id}))),n={fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,filename:"mirage-mc-".concat((new Date).toDateString()),useBom:!0,useKeysAsHeaders:!0};new X.ExportToCsv(n).generateCsv(e),d(!1)}(e.getPrePaginationRowModel().rows)},startIcon:(0,b.jsx)(Y.Z,{}),variant:"contained",children:"Export Current Data"})]})}})},$=n(4942),Q=n(66934),tt=n(12065),et=n(40139);(0,Q.ZP)("div")((function(t){var e=t.theme;return(0,$.Z)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,tt.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,tt.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),(0,Q.ZP)("div")((function(t){return{padding:t.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),(0,Q.ZP)(et.ZP)((function(t){var e=t.theme;return{color:"inherit","& .MuiInputBase-input":(0,$.Z)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));var nt=n(69824),at=n(78687),it=n(43416),rt=n(70492),ot=function(t){var e=t.canUndo,n=t.canRedo,a=t.onUndo,i=t.onRedo;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Z,{onClick:a,disabled:!e,children:(0,b.jsx)(it.Z,{})}),(0,b.jsx)(g.Z,{onClick:i,disabled:!n,children:(0,b.jsx)(rt.Z,{})})]})},lt={onUndo:nt.zF.undo,onRedo:nt.zF.redo},st=ot=(0,at.$j)((function(t){return{canUndo:t.streamFilters.past.length>0,canRedo:t.streamFilters.future.length>0}}),lt)(ot),ct=n(49079),ut=function(){var t=(0,at.I0)(),e=((0,r.Z)(),(0,at.v9)(ct.mj)),n=(0,j.Wz)(),o=n.getList,l=n.isLoading,s=n.getEvents,c=n.requestEvents,u=n.getDetail,d=(0,i.useState)(),f=(0,a.Z)(d,2),h=f[0],g=f[1],m=(0,i.useState)(),x=(0,a.Z)(m,2),E=x[0],L=x[1],R=(0,i.useRef)(null);(0,i.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){L({lng:t.coords.longitude,lat:t.coords.latitude})}),(function(){}))}),[]);var S=l("rawData"),A=(l("events"),l("locs"));(0,i.useEffect)((function(){S||c(e,1e3)}),[S,e]);var I=(0,i.useCallback)((function(t){var e=t.stream_detail_id,n=u(e);g(n),L({lng:n.long,lat:n.lat})}),[s]),M=function(e,n){n&&L({lng:n.long,lat:n.lat}),t((0,ct.rr)({value:e}))};return(0,b.jsxs)(y,{appBarContent:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(st,{})}),children:[(0,b.jsx)("div",{style:{position:"absolute",top:0,left:0,zIndex:0,height:"100%",width:"100%",overflow:"hidden"},children:(0,b.jsx)(V.Z,{style:{height:"100%",width:"100%"},children:function(t){var e=t.height,n=t.width;return(0,b.jsx)(F,{locs:o("locs"),countries:o("countries"),onSelect:M,width:n,height:e,legendHolderRef:R,zoomLoc:E})}})}),(0,b.jsxs)(D.Z,{container:!0,sx:{height:"100%",position:"relative",pointerEvents:"none"},direction:"column",justifyContent:"space-between",children:[(0,b.jsx)(D.Z,{children:(0,b.jsx)(Z.Z,{m:1,ref:R,style:{position:"absolute",top:0,left:0,maxHeight:"30vh"}})}),(0,b.jsxs)(D.Z,{container:!0,spacing:2,m:0,sx:{pointerEvents:"auto",maxHeight:450},alignItems:"end",children:[(0,b.jsx)(D.Z,{item:!0,xs:8,children:(0,b.jsx)(w.Z,{sx:{minHeight:275,backgroundColor:function(t){return(0,H.x)(t.palette.background.paper)}},children:(0,b.jsxs)(_.Z,{children:[(0,b.jsx)(v.Z,{children:"Event list"}),(0,b.jsx)(J,{data:s(),onSelectRow:I,highlightId:h})]})})}),h&&(0,b.jsx)(D.Z,{item:!0,xs:4,sx:{height:"100%"},children:(0,b.jsx)(w.Z,{sx:{height:"100%",backgroundColor:function(t){return(0,H.x)(t.palette.background.paper)}},children:(0,b.jsx)(_.Z,{sx:{height:"100%"},children:(0,b.jsx)(G,{data:h,onSelect:M})})})})]})]}),(0,b.jsx)(C.Z,{sx:{color:"#fff",zIndex:function(t){return t.zIndex.drawer+1}},open:S||A,children:(0,b.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"50%",flexDirection:"column",textAlign:"center"},children:[(0,b.jsx)(k.Z,{sx:{width:"100%"},children:(0,b.jsx)(p.Z,{variant:"determinate",value:S?40:A?90:100})}),(0,b.jsx)(k.Z,{sx:{width:"100%"},children:(0,b.jsx)("h2",{children:S?"Read data....":A?"Process data...":"Done!"})})]})})]})}}}]);
//# sourceMappingURL=37.c4665342.chunk.js.map