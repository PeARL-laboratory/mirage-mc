"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[478],{84254:function(e,t,n){n.d(t,{GS:function(){return v},xB:function(){return p},ZP:function(){return w}});var i=n(29439),r=n(72791),o=n.p+"static/media/earth-night.da273783100dfbfd07c0.jpg",a=n(36431),l=n(75483),s=n(96174),c=n(90977),d=(n(26719),n(53329)),u=n(74165),h=n(15861),x=(n(88063),function(){var e=(0,h.Z)((0,u.Z)().mark((function e(t,n){var i,r,o,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.renderer(),r=t.scene(),o=t.camera(),i.render(r,o),a=i.domElement.toDataURL(),f(a,n);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=function(e,t){var n=window.document.createElement("a");n.style="display:none;",n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),n.remove()},g=x,m=n(80184),v=20,p=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],j=l.BYU().range([.01,.7]),b=l.BYU().range([.3,.4]),Z=l.BYU().range([.1,1]),y=(0,r.forwardRef)((function(e,t){var n=e.locs,u=e.countries,h=e.width,x=e.height,f=e.onSelect,y=e.onSelectLegend,w=e.zoomLoc,_=(e.legendHolderRef,e.toolbarRef),k=(0,r.useRef)(),C=(0,r.useRef)(),S=(0,r.useState)("country"),R=(0,i.Z)(S,2),z=R[0],P=(R[1],(0,r.useState)()),B=(0,i.Z)(P,2),L=B[0],E=B[1],D=(0,r.useState)(0),M=(0,i.Z)(D,2),I=M[0],T=M[1],W=(0,r.useState)([{lat:-92.52824601944323,lng:38.31079101844495,altitude:1.8},{lat:51.58421865,lng:45.9571029,altitude:1.8},{lat:31.3037101,lng:-89.29276214,altitude:1.8},{lat:33.5842591,lng:-101.8804709,altitude:1.8}]),F=(0,i.Z)(W,2),A=F[0],U=F[1],O=(0,r.useState)([]),G=(0,i.Z)(O,2),V=G[0],Y=G[1],H=(0,r.useState)({}),K=(0,i.Z)(H,2),q=(K[0],K[1]),N=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ececec",t=l.PKp(p),n=function(n){if(!n||""===n||""===n.trim)return"black";var i=t.domain();return i.find((function(e){return e===n}))||i.length<v?t(n):e};return n.domain=t.domain,n.range=t.range,n}()}),[]);function X(e){var t=e.locs,n=e.countries,i={},r=l.Wem(t,(function(e){return null===e||void 0===e?void 0:e.count}));j.domain(r),b.domain(r),Z.domain(l.Wem(n,(function(e){return i[e.title]=e,null===e||void 0===e?void 0:e.count}))),N.domain([]).range(p),n.forEach((function(e){return N(e.title)}));var o=0;return n.length>3&&[0,1,2,3,0].forEach((function(e){A[o]||(A[o]={lat:0,lng:0,altitude:1}),A[o].lat=n[e].lat,A[o].lng=n[e].long,o++})),{MAP_CENTERs:A,contriesMap:i}}(0,r.useEffect)((function(){var e=X({locs:n,countries:u}),t=e.MAP_CENTERs,i=e.contriesMap;q(i),U(t),w||T(0)}),[n,u]);var $=(0,r.useState)(null),J=(0,i.Z)($,2),Q=J[0],ee=J[1];(0,r.useEffect)((function(){if(k.current&&I<A.length){var e=setTimeout((function(){k.current.pointOfView(A[I],4e3),T(I+1)}),4e3);return ee(e),function(){clearInterval(e)}}}),[I,A]);var te=(0,r.useCallback)((function(){Q&&clearInterval(Q),T(A.length)}),[Q]),ne=(0,r.useState)(null),ie=(0,i.Z)(ne,2),re=ie[0],oe=ie[1],ae=(0,r.useCallback)((function(e,t){if(k.current){te(),k.current.pointOfView({lat:t,lng:e,altitude:1.2},2e3),Y([{lng:e,lat:t}]),re&&clearInterval(re);var n=setTimeout((function(){Y([])}),1e4);oe(n)}}),[I,te,re]);(0,r.useEffect)((function(){return w&&ae(w.lng,w.lat),function(){re&&clearInterval(re)}}),[w]);var le=(0,r.useCallback)((function(){g(k.current,"MIRAGE-mc")}),[C,k]);return(0,r.useEffect)((function(){y("selectCountry",(function(e){f({country:[e.title]}),ae(e.long,e.lat)}))}),[ae,f]),(0,m.jsxs)("div",{style:{background:"#000010",position:"relative"},children:[(0,m.jsx)("div",{ref:C,style:{marginTop:"-20vh",height:"120vh"},children:(0,m.jsx)(a.Z,{width:h,height:1.2*x,ref:k,globeImageUrl:o,showAtmosphere:!0,ringsData:V,ringColor:function(){return"#D39F49"},ringResolution:1e3,ringMaxRadius:5,ringPropagationSpeed:5,ringRepeatPeriod:500,labelsData:u,labelLat:(0,r.useCallback)((function(e){return e.lat}),[]),labelLng:(0,r.useCallback)((function(e){return e.long}),[]),labelAltitude:(0,r.useCallback)((function(e){return L&&L.country===e.title?.05:.02}),[L]),labelText:(0,r.useCallback)((function(e){return e.title}),[]),labelSize:(0,r.useCallback)((function(e){return L&&L.country===e.title?1:b(null===e||void 0===e?void 0:e.count)}),[L]),labelDotRadius:0,labelColor:(0,r.useCallback)((function(e){var t;return null!==(t=e.color)&&void 0!==t?t:"white"}),[L]),labelResolution:2,hexBinPointsData:n,hexBinPointWeight:"count",hexBinPointLng:(0,r.useCallback)((function(e){return e.long}),[]),hexBinPointLat:(0,r.useCallback)((function(e){return e.lat}),[]),hexAltitude:(0,r.useCallback)((function(e){return j(e.sumWeight)}),[]),hexBinResolution:4,hexTopColor:(0,r.useCallback)((function(e){return N(e.points[0][z])}),[]),hexSideColor:(0,r.useCallback)((function(e){return N(e.points[0][z])}),[]),hexBinMerge:!1,onHexHover:(0,r.useCallback)((function(e){E(e?e.points[0]:void 0)}),[]),hexLabel:(0,r.useCallback)((function(e){return'<div class="overlay-holder">\n            <div class="overlay-header">\n                <span><b>'.concat(l.Smz(e.points,(function(e){return null===e||void 0===e?void 0:e.count})),'</b> stations</span>\n            </div>\n            <div class="overlay-content">\n            <table>\n                <tbody><tr>').concat(e.points.slice().sort((function(e,t){return(null===t||void 0===t?void 0:t.count)-(null===e||void 0===e?void 0:e.count)})).map((function(e){return"<td>[".concat(null===e||void 0===e?void 0:e.count,"]</td><td>").concat(e.title,"</td>")})).join("</tr><tr>"),"</tr></tbody>\n            </table>\n            </div>\n          </div>")}),[]),onHexClick:function(e){var t,n=[];e.points.forEach((function(e){n.push(e.city)})),f({city:n,country:[null===(t=e.points[0])||void 0===t?void 0:t.country]})},onGlobeClick:te})}),_&&(0,m.jsx)(s.Z,{container:_.current,children:(0,m.jsx)(c.Z,{onClick:le,children:(0,m.jsx)(d.Z,{})})})]})})),w=y},78305:function(e,t,n){n.d(t,{X:function(){return i},e:function(){return r}});n(72426);var i=[{accessorKey:"city",header:"City"},{accessorKey:"country",header:"Country"},{accessorKey:"station",header:"Station"},{accessorKey:"station_genre",header:"Station Genre"},{accessorKey:"stream_artist",header:"Artist",dynamic:!0},{accessorKey:"stream_song",header:"Song",dynamic:!0}],r=i.filter((function(e){return!e.filterDisable}))},26719:function(e,t,n){n.d(t,{x:function(){return a}});var i=n(1413),r=n(36395),o=n(75483);function a(e){var t=(0,o.$_Y)(e);return t.opacity=.5,t.toString()}t.Z=function(e,t,n,o,a){if(t)for(var l=0;l<t.length;l++)if(t[l].id===e){var s=t[l].source,c=null!=s&&s instanceof Function?s(n?"dark":"light",a):s,d=null!=c?c.palette:{};return(0,r.Z)((0,i.Z)((0,i.Z)({},c),{},{palette:(0,i.Z)((0,i.Z)({},d),{},{mode:n?"dark":"light"}),direction:o?"rtl":"ltr"}))}return(0,r.Z)({palette:{mode:n?"dark":"light"},direction:o?"rtl":"ltr"})}},70791:function(e,t,n){n.r(t),n.d(t,{default:function(){return ze}});var i=n(29439),r=n(72791),o=n(93539),a=n(1413),l=n(95321),s=n(74350),c=n(13967),d=n(42404),u=n(24003),h=n(25256),x=n(29464),f=n(90977),g=n(4567),m=n(40986),v=n(7607),p=n(99631),j=n(80184);function b(e){var t=e.children,n=e.pageTitle,i=e.onBackClick,b=e.isLoading,Z=e.appBarContent,y=void 0===Z?null:Z,w=e.contentStyle,_=e.tabs,k=void 0===_?null:_,C=(0,l.useTheme)().isRTL,S=(0,u.useOnline)(),R=(0,c.Z)(),z=((0,d.useConfig)().appConfig||{}).menu||{},P=z.width,B=void 0===P?240:P,L=z.appBarLeadingContent,E=void 0===L?null:L,D=(0,r.useContext)(s.default),M=D.toggleThis,I=D.isDesktop,T=D.isMenuOpen,W=(0,o.Z)(),F="";("string"===typeof n||n instanceof String)&&(F=n);return(0,j.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[(0,j.jsx)(h.Z,{position:I?"absolute":void 0,sx:{width:T&&I?"calc(100% - ".concat(B,"px)"):void 0,zIndex:R.zIndex.drawer,transition:R.transitions.create(["width","margin"],{easing:R.transitions.easing.sharp,duration:R.transitions.duration.leavingScreen}),maxHeight:64,marginLeft:C?0:-12,marginRight:C?30:0,backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},children:(0,j.jsxs)(x.Z,{children:[T&&I||!i&&(0,j.jsx)(f.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){T?M("isMobileMenuOpen"):(M("isMiniMode",!1),M("isMenuOpen",!0),I||M("isMobileMenuOpen"))},edge:"start",children:(0,j.jsx)(v.Z,{})}),i&&(0,j.jsx)(f.Z,{color:"inherit","aria-label":"open drawer",onClick:i,children:(0,j.jsx)(p.Z,{})}),!i&&T&&!1,E,(0,j.jsx)(g.Z,{variant:"h6",color:"inherit",noWrap:!0,children:F}),(0,j.jsx)("div",{style:{flex:"1 1 auto"}}),y]})}),(0,j.jsx)("div",{style:{alignItems:"center",justifyContent:"flex-end",minHeight:64}}),b&&(0,j.jsx)(m.Z,{}),!S&&(0,j.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",height:15,backgroundColor:R.palette.secondary.main},children:(0,j.jsx)(g.Z,{variant:"caption",color:"textSecondary",noWrap:!0,children:W.formatMessage({id:"offline",defaultMessage:"Offline"})})}),k,(0,j.jsx)("div",{style:(0,a.Z)({flex:1,overflow:"auto"},w),children:t})]})}var Z=n(20250),y=n(88588),w=n(22492),_=n(18060),k=n(64554),C=n(84254),S=n(56525),R=n(19628),z=(n(28920),n(78305)),P=n(5849),B=n(65560),L=n(76730),E=function(e){var t=e.data,n=e.isLoadingData,o=e.onSelectRow,a=e.highlightId,l=z.X,s=(0,r.useRef)(null),c=(0,r.useState)(!1),d=(0,i.Z)(c,2),u=d[0],h=d[1],x=(0,r.useState)([]),f=(0,i.Z)(x,2),g=f[0],m=f[1],v=(0,Z.Wz)().getDownloadData;(0,r.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.scrollToIndex(0)}),[g]);return(0,j.jsx)(R.ZP,{columns:l,data:t,enableBottomToolbar:!1,enableGlobalFilterModes:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,muiTablePaperProps:{sx:{display:"flex",flexDirection:"column",height:"100%"}},muiTableContainerProps:{sx:{height:"100%",flexGrow:2}},initialState:{density:"compact"},onSortingChange:m,state:{isLoading:n||u,sorting:g},rowVirtualizerInstanceRef:s,rowVirtualizerProps:{overscan:8},muiTableBodyRowProps:function(e){var t=e.row;return{onClick:function(){o(t.original)},sx:{cursor:"pointer",opacity:a?a._id===t.original._id?1:.7:1}}},enableColumnResizing:!0,defaultColumn:{minSize:20,maxSize:9001,size:100},renderTopToolbarCustomActions:function(e){var t=e.table;return(0,j.jsxs)(k.Z,{sx:{display:"flex",gap:"1rem",p:"0.5rem",flexWrap:"no-wrap"},children:[(0,j.jsx)(P.Z,{color:"primary",target:"_blank",size:"small",href:"https://texastechuniversity-my.sharepoint.com/:x:/g/personal/ngan_v_t_nguyen_ttu_edu/EWEu7l96MQ1Jgu8OBKspIR0BjmY1i0t6XlV6ROPCYcPkkA?download=1",startIcon:(0,j.jsx)(B.Z,{}),variant:"contained",children:"Download All Data"}),(0,j.jsx)(P.Z,{disabled:0===t.getPrePaginationRowModel().rows.length,onClick:function(){return e=t.getPrePaginationRowModel().rows,h(!0),void v(e.map((function(e){return e.original}))).then((function(e){var t={fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,filename:"mirage-mc-".concat((new Date).toDateString()),useBom:!0,useKeysAsHeaders:!0};new L.ExportToCsv(t).generateCsv(e),h(!1)})).catch((function(e){h(!1)}));var e},startIcon:(0,j.jsx)(B.Z,{}),variant:"contained",size:"small",children:"Export Current Data"})]})}})},D=n(73457),M=n(69824),I=n(78687),T=n(43416),W=n(70492),F=function(e){var t=e.canUndo,n=e.canRedo,i=e.onUndo,r=e.onRedo;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Z,{onClick:i,disabled:!t,children:(0,j.jsx)(T.Z,{})}),(0,j.jsx)(f.Z,{onClick:r,disabled:!n,children:(0,j.jsx)(W.Z,{})})]})},A={onUndo:M.zF.undo,onRedo:M.zF.redo},U=F=(0,I.$j)((function(e){return{canUndo:e.streamFilters.past.length>0,canRedo:e.streamFilters.future.length>0}}),A)(F),O=n(49079),G=n(26719),V=(n(88240),n(97718)),Y=n(40786),H=n(45987),K=n(29347),q=n(61474),N=n(34729),X=n(5574),$=n(4899),J=n(3142),Q=n(19188),ee=n(65469),te=n(67414),ne=n(85771),ie=n(81153),re=n(60220),oe=n(94721),ae=n(77234),le=n(76090),se=n(72426),ce=n.n(se),de=n(14642),ue=n(81131),he=n(78299),xe=n(66934),fe=["expand"],ge=["header","banner","defaultValue"],me=(0,xe.ZP)((function(e){e.expand;var t=(0,H.Z)(e,fe);return(0,j.jsx)(ue.Z,(0,a.Z)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));var ve=function(e){var t,n,i,r=e.data,o=e.onSelect,a=ce()(r.time_station).format("LLL"),l=null!==(t=r.stream_name)&&void 0!==t?t:"N/A";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(g.Z,{component:"div",variant:"h2",onClick:function(){return o({station:[r.station]},r)},children:[r.station," ",(0,j.jsxs)(g.Z,{component:"span",variant:"subtitle1",children:[null!==(n=r.broadcast_frequency)&&void 0!==n?n:"0.0"," FM"]})]}),(0,j.jsx)(g.Z,{component:"div",variant:"subtitle1",color:"text.secondary",children:r.station_description}),(0,j.jsxs)("table",{style:{width:"100%"},children:[(0,j.jsxs)("colgroup",{children:[(0,j.jsx)("col",{style:{width:130}}),(0,j.jsx)("col",{})]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"Station URL"}),(0,j.jsx)("td",{children:(0,j.jsx)(ee.Z,{href:r.station_url,target:"_blank",color:"secondary",children:r.station_url})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"Location"}),(0,j.jsx)("td",{children:(0,j.jsxs)(ee.Z,{target:"_blank",color:"secondary",href:"https://maps.google.com/?q=".concat(r.lat,",").concat(r.long),children:[(0,j.jsx)(de.Z,{}),r.city,", ",r.country]})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"Radio Garden URL"}),(0,j.jsx)("td",{children:(0,j.jsx)(ee.Z,{href:r.url,target:"_blank",color:"secondary",children:r.url})})]})]}),(r.stream_name||r.stream_genre||r.stream_url)&&(0,j.jsx)(pe,{header:"Stream Info",defaultValue:!0,children:(0,j.jsxs)(w.Z,{children:[(0,j.jsx)(ee.Z,{href:r.stream_url,target:"_blank",color:"secondary",children:r.stream_url}),(0,j.jsx)(g.Z,{variant:"h4",children:l}),(0,j.jsxs)(g.Z,{color:"text.secondary",gutterBottom:!0,children:[" ",r.stream_description]}),r.stream_genre&&(0,j.jsx)(te.Z,{direction:"row",spacing:1,flexWrap:!0,sx:{width:"100%",flexWrap:"wrap"},children:(0,j.jsx)(ne.Z,{label:r.stream_genre,size:"small"})})]})}),(0,j.jsx)(pe,{header:"Event",banner:(0,j.jsxs)(j.Fragment,{children:['"',r.stream_song,'" at ',a]}),children:(0,j.jsx)(w.Z,{children:(0,j.jsxs)(ie.ZP,{container:!0,spacing:1,children:[(0,j.jsx)(ie.ZP,{item:!0,xs:12,children:(0,j.jsxs)(g.Z,{color:"text.secondary",gutterBottom:!0,children:[" ",a]})}),(0,j.jsxs)(ie.ZP,{item:!0,flexGrow:1,children:[(0,j.jsx)(g.Z,{variant:"h4",component:"div",onClick:r.stream_song?function(){return o({stream_song:[r.stream_song]})}:null,children:r.stream_song}),r.year_released&&(0,j.jsxs)(g.Z,{color:"text.secondary",gutterBottom:!0,children:[" ",r.year_released]}),r.stream_song_genre&&(0,j.jsx)(ne.Z,{label:r.stream_song_genre,size:"small"})]}),(0,j.jsxs)(ie.ZP,{item:!0,children:[(0,j.jsxs)(k.Z,{sx:{flex:"1 0 auto",display:"flex"},children:[(0,j.jsx)(re.Z,{"aria-label":"recipe",src:r.stream_artist_image_url,sx:{mr:1},children:r.stream_artist[0]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(g.Z,{variant:"h5",color:"text.primary",children:r.stream_artist}),(0,j.jsxs)(g.Z,{variant:"subtitle2",children:["from ",null!==(i=r.stream_artist_country)&&void 0!==i?i:"N/A"]})]})]}),r.stream_artist_genre&&r.stream_artist_genre.map((function(e){return(0,j.jsx)(ne.Z,{label:e,size:"small"},e)}))]}),(0,j.jsx)(ie.ZP,{item:!0,xs:12,children:r.stream_instrument_list&&(0,j.jsxs)(te.Z,{direction:"row",spacing:1,flexWrap:!0,sx:{width:"100%",flexWrap:"wrap"},children:[(0,j.jsx)(g.Z,{children:"Instruments: "}),r.stream_instrument_list.split(";").map((function(e){return(0,j.jsx)(ne.Z,{label:e,size:"small"},e)}))]})}),r.stream_lyrics&&(0,j.jsxs)(ie.ZP,{item:!0,xs:12,children:[(0,j.jsxs)(ie.ZP,{container:!0,children:[(0,j.jsx)(oe.Z,{sx:{mt:2,mb:2,flexGrow:1}}),(0,j.jsxs)(g.Z,{variant:"h5",component:"div",sx:{margin:"auto"},children:["Lyrics ",r.stream_lyrics_language?"(".concat(r.stream_lyrics_language,")"):""]}),(0,j.jsx)(oe.Z,{sx:{mt:2,mb:2,flexGrow:1}})]}),r.stream_lyrics]}),(r.spotify_uri||r.youtube_url)&&(0,j.jsxs)(ie.ZP,{item:!0,xs:12,children:[(0,j.jsxs)(ie.ZP,{container:!0,children:[(0,j.jsx)(oe.Z,{sx:{mt:2,mb:2,flexGrow:1}}),(0,j.jsx)(g.Z,{variant:"h5",component:"div",sx:{margin:"auto"},children:"Music Platform"}),(0,j.jsx)(oe.Z,{sx:{mt:2,mb:2,flexGrow:1}})]}),r.spotify_uri&&(0,j.jsx)(ie.ZP,{item:!0,xs:12,children:(0,j.jsx)("iframe",{loading:"lazy",src:r.spotify_uri.replace("com/track","com/embed/track"),width:"100%",height:"80",frameBorder:"0","data-mce-fragment":"1"})}),r.youtube_url&&(0,j.jsx)(ie.ZP,{item:!0,xs:12,children:(0,j.jsx)("iframe",{width:"100%",height:"auto",loading:"lazy",src:r.youtube_url.replace("youtube.com/watch?v=","youtube-nocookie.com/embed/"),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})]})]})})})]})};function pe(e){var t=e.header,n=e.banner,o=e.defaultValue,l=(0,H.Z)(e,ge),s=(0,r.useState)(o),c=(0,i.Z)(s,2),d=c[0],u=c[1],h=(0,he.q_)({reset:d,cancel:d,config:{duration:2e4},loop:!d,from:{transform:"translateX(100%)"},to:{transform:"translateX(-100%)"}});return(0,j.jsxs)(y.Z,{elevation:10,sx:{mt:1},children:[(0,j.jsxs)(ae.Z,{disableSpacing:!0,children:[(0,j.jsx)(g.Z,{variant:"h5",children:t}),n&&!d&&(0,j.jsx)("div",{style:{width:"100%",overflow:"hidden",marginLeft:10,marginRight:10,whiteSpace:"nowrap"},children:(0,j.jsx)(g.Z,{variant:"subtitle2",children:(0,j.jsx)(he.q.div,{style:h,className:"textbanner",children:n})})}),(0,j.jsx)(me,{expand:d,onClick:function(){return u(!d)}})]}),(0,j.jsx)(le.Z,(0,a.Z)({in:d,unmountOnExit:!0},l))]})}var je=n(93433),be=n(68286),Ze=n(75483),ye=(0,Ze.BYU)().range([5,20]),we=(0,Ze.BYU)().domain([7e-4,.0014,.003,.006,.012,.024,.048,.096,.192,.3712,.768,1.536,3.072,6.144,11.8784,23.7568,47.5136,98.304,190.0544,360]).range((0,Ze.w6H)(0,20).map((function(e){return 20-e})));function _e(e){var t=e.locs,n=e.height,o=e.width,a=e.highlight,l=(0,c.Z)(),s=(0,r.useState)([]),d=(0,i.Z)(s,2),u=d[0],h=d[1],x=(0,r.useState)({center:{lon:0,lat:0},zoom:1}),f=(0,i.Z)(x,2),g=f[0],m=f[1];(0,r.useEffect)((function(){try{if(t.length){var e=l.palette.primary.main;ye.domain((0,Ze.Wem)(t,(function(e){return null===e||void 0===e?void 0:e.count})));var n=[],i=[],r=[],o=[];t.forEach((function(e){n.push(e.long),i.push(e.lat),r.push(ye(null===e||void 0===e?void 0:e.count)),o.push("".concat(e.title," (").concat(null===e||void 0===e?void 0:e.count,")"))}));var s=ye.ticks(2),c=s.map((function(e){return ye(e)})),d=s.map((function(t,n){return{mapbox:"mapboxTick",type:"scattermapbox",name:"".concat(t),lon:[0],lat:[0],x:[0],y:[0],marker:{color:e,size:c[n]},visible:"legendonly"}})),u=[{type:"scattermapbox",lon:n,lat:i,hoverinfo:"text",text:o,showlegend:!1,marker:{size:r,color:e,line:{color:"black"}},name:"stream"}].concat((0,je.Z)(d)),x=(0,Ze.Wem)(t,(function(e){return null===e||void 0===e?void 0:e.long})),f=(0,Ze.Wem)(t,(function(e){return null===e||void 0===e?void 0:e.lat})),g={lon:(x[1]+x[0])/2,lat:(f[1]+f[0])/2},v=Math.min(10,Math.min(we(1.2*(x[1]-x[0])*2),we(1.2*(f[1]-f[0])))/1.5);if(m({zoom:v,center:g}),a){var p=t.find((function(e){return e.city_id===a.city_id}));p&&u.push({type:"scattermapbox",lon:[p.long],lat:[p.lat],hoverinfo:"text",text:["".concat(p.title," (").concat(null===p||void 0===p?void 0:p.count,")")],showlegend:!0,marker:{size:[ye(p.count)],color:"red",line:{color:"black"}},name:p.title})}h(u)}else h([])}catch(j){}}),[t,a]);var v={paper_bgcolor:l.palette.background.paper,plot_bgcolor:"rgba(0,0,0,0)",autoscale:!1,height:n,width:o,margin:{t:10,r:10,l:10,b:10},mapboxTick:{style:"whitebg"},mapbox:{style:"carto-positron",center:g.center,zoom:g.zoom},font:{family:l.typography.fontFamily,size:l.typography.fontSize,color:l.palette.text.primary},legend:{title:{text:"#Streams"},showticksuffix:"last",x:1,xanchor:"right",y:0,orientation:"h"}};return(0,j.jsx)(be.Z,{data:u,layout:v,config:{displaylogo:!1,toImageButtonOptions:{format:"svg",filename:"Station_Map",height:1080,width:1920,scale:1},showEditInChartStudio:!0,plotlyServerURL:"https://chart-studio.plotly.com","#Station":!1}})}var ke=["children","value","index"];function Ce(e){var t=e.currentDetail,n=e.locs,o=e.events,l=e.onSelect,s=e.sx,c=void 0===s?{}:s,d=(0,r.useState)(!1),u=(0,i.Z)(d,2),h=u[0],x=u[1],m=(0,r.useState)(!0),v=(0,i.Z)(m,2),p=v[0],b=v[1],Z=(0,r.useState)(0),_=(0,i.Z)(Z,2),C=_[0],R=_[1],z=(0,r.useState)([]),P=(0,i.Z)(z,2),B=P[0],L=P[1];(0,r.useEffect)((function(){try{var e={};n.forEach((function(t){return e[t.city_id]=t}));var t=(0,Ze.Xxj)(o,(function(e){return e.city_id})).map((function(t){var n,r,o,a=(0,i.Z)(t,2),l=a[0],s=a[1];return{title:null===(n=e[l])||void 0===n?void 0:n.title,city_id:l,count:s.length,lat:null===(r=e[l])||void 0===r?void 0:r.lat,long:null===(o=e[l])||void 0===o?void 0:o.long}}));L(t)}catch(r){}}),[n,o]);var E=function(e,t){R(t)},D=(0,r.useCallback)((function(){b(!p)}),[p]),M=(0,r.useCallback)((function(){x(!1)}),[h]),I=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(k.Z,{sx:{borderBottom:1,borderColor:"divider"},display:"flex",justifyContent:"space-between",children:[(0,j.jsx)(k.Z,{children:(0,j.jsxs)(K.Z,{value:C,onChange:E,"aria-label":"basic tabs example",children:[(0,j.jsx)(q.Z,(0,a.Z)({label:"Map"},Se(0))),(0,j.jsx)(q.Z,(0,a.Z)({label:"Event Info"},Se(1)))]})}),h?(0,j.jsx)(f.Z,{size:"small",onClick:function(){return x(!1)},children:(0,j.jsx)(Q.Z,{})}):(0,j.jsx)(f.Z,{size:"small",onClick:function(){return x(!0)},children:(0,j.jsx)(J.Z,{})})]}),(0,j.jsx)(Re,{value:C,index:0,sx:{height:"100%"},children:(0,j.jsx)(w.Z,{style:{margin:"auto",display:"block",maxWidth:"100%",height:"100%",padding:0},children:(0,j.jsx)(S.Z,{style:{height:"100%",width:"100%"},children:function(e){var n=e.height,i=e.width;return(0,j.jsx)(_e,{height:n,width:i,locs:B,highlight:t})}})})}),(0,j.jsx)(Re,{value:C,index:1,style:{height:"100%",overflowY:"auto"},children:1===C&&(0,j.jsx)(w.Z,{sx:{width:"100%"},children:t?(0,j.jsx)(ve,{data:t,onSelect:l}):(0,j.jsx)(j.Fragment,{children:"Select from Event List"})})})]})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y.Z,{sx:(0,a.Z)((0,a.Z)({},c),{},{width:p?"100%":200,backgroundColor:function(e){return(0,G.x)(e.palette.background.paper)}}),children:(0,j.jsxs)(w.Z,{sx:{height:"100%",position:"relative"},children:[(0,j.jsx)(g.Z,{children:"Song Info & Visualizations"}),(0,j.jsx)(f.Z,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:0,top:0},children:(0,j.jsx)(Y.Z,{})}),(0,j.jsx)(N.Z,{container:!0,style:{height:"100%",width:"100%"},m:0,flexDirection:"column",flexWrap:"nowrap",sx:{bgcolor:function(e){return e.palette.background.paper}},children:I()})]})}),(0,j.jsx)(X.Z,{fullScreen:!0,open:h,onClose:M,children:(0,j.jsx)($.Z,{sx:{padding:0},children:(0,j.jsx)(N.Z,{container:!0,style:{width:"100%",height:"100%"},m:0,flexDirection:"column",flexWrap:"nowrap",children:I()})})})]})}function Se(e){return{id:"event-tab-".concat(e),"aria-controls":"event-tabpanel-".concat(e)}}function Re(e){var t=e.children,n=e.value,i=e.index,r=(0,H.Z)(e,ke);return(0,j.jsx)(y.Z,(0,a.Z)((0,a.Z)({role:"tabpanel",hidden:n!==i,id:"event-tabpanel-".concat(i),"aria-labelledby":"event-tab-".concat(i)},r),{},{children:n===i&&(0,j.jsx)(j.Fragment,{children:t})}))}n(72515),n(59498);var ze=function(){var e=(0,r.useMemo)((function(){return{lg:[{i:"eventList",x:0,y:5,w:6,h:5,isBounded:!0},{i:"eventDetail",x:6,y:5,w:6,h:5,isBounded:!0}],md:[{i:"eventList",x:0,y:5,w:5,h:5,isBounded:!0},{i:"eventDetail",x:5,y:5,w:5,h:5,isBounded:!0}],sm:[{i:"eventList",x:0,y:0,w:6,h:4,isBounded:!0},{i:"eventDetail",x:2,y:0,w:6,h:4,isBounded:!0}],xs:[{i:"eventList",x:0,y:0,w:4,h:4,isBounded:!0},{i:"eventDetail",x:2,y:0,w:4,h:4,isBounded:!0}],xxs:[{i:"eventList",x:0,y:0,w:2,h:4,isBounded:!0},{i:"eventDetail",x:2,y:0,w:2,h:4,isBounded:!0}]}}),[]),t=(0,I.I0)(),n=((0,o.Z)(),(0,I.v9)(O.mj)),a=(0,Z.Wz)(),l=a.getList,s=a.isLoading,c=a.getEvents,d=a.requestEvents,u=a.requestDetail,h=a.getDetail,x=a.setFuncCollection,v=(0,r.useState)(),p=(0,i.Z)(v,2),R=p[0],z=p[1],P=(0,r.useState)(!0),B=(0,i.Z)(P,2),L=B[0],M=B[1],T=(0,r.useRef)(null),W=h();(0,r.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){z({lng:e.coords.longitude,lat:e.coords.latitude})}),(function(){})),t({type:V.O5,opened:!0})}),[]),(0,r.useEffect)((function(){W&&z({lng:W.long,lat:W.lat})}),[W]);var F=s("rawData"),A=s("events"),H=s("locs");(0,r.useEffect)((function(){F||d(n,1e3)}),[F,n]);var K=(0,r.useCallback)((function(e){u(e)}),[c]),q=function(e,n){n&&z({lng:n.long,lat:n.lat}),t((0,O.rr)({value:e}))},N=(0,r.useCallback)((function(){M(!L)}),[L]);return(0,j.jsxs)(b,{appBarContent:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:T}),(0,j.jsx)(U,{})]}),children:[(0,j.jsx)("div",{style:{position:"absolute",top:0,left:0,zIndex:0,height:"100%",width:"100%",overflow:"hidden"},children:(0,j.jsx)(S.Z,{style:{height:"100%",width:"100%"},children:function(e){var t=e.height,n=e.width;return(0,j.jsx)(C.ZP,{locs:l("locs"),countries:l("countries"),onSelect:q,onSelectLegend:x,width:n,height:t,toolbarRef:T,zoomLoc:R})}})}),(0,j.jsx)("div",{style:{height:"100%",position:"relative",pointerEvents:"none",overflow:"hidden"},children:(0,j.jsx)(S.Z,{style:{height:"100%",width:"100%",position:"relative"},children:function(t){var n=t.height,i=t.width;return(0,j.jsxs)(D.Responsive,{className:"layout",cols:{lg:12,md:10,sm:6,xs:4,xxs:2},layouts:e,preventCollision:!0,compactType:null,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},margin:{lg:[10,10],md:[10,10],sm:[10,10],xs:[10,10],xxs:[10,10]},width:i,rowHeight:(n-20)/10-10,height:n,style:{position:"relative",pointerEvents:"all"},children:[(0,j.jsx)("div",{style:{pointerEvents:"all"},children:(0,j.jsx)(y.Z,{sx:{backgroundColor:function(e){return(0,G.x)(e.palette.background.paper)},height:"100%",position:"relative"},children:(0,j.jsxs)(w.Z,{sx:{height:"100%",position:"relative"},children:[(0,j.jsx)(g.Z,{children:"Song List"}),(0,j.jsx)(f.Z,{"aria-label":"close",onClick:N,sx:{position:"absolute",right:0,top:0},children:(0,j.jsx)(Y.Z,{})}),(0,j.jsx)("div",{style:{height:"100%"},children:(0,j.jsx)(E,{data:c(),isLoadingData:A,onSelectRow:K,highlightId:W})})]})})},"eventList"),(0,j.jsx)("div",{style:{pointerEvents:"all"},children:(0,j.jsx)(Ce,{currentDetail:W,onSelect:q,events:c(),locs:l("locs"),sx:{height:"100%",position:"relative"}})},"eventDetail")]})}})}),(0,j.jsx)(_.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:F||H,children:(0,j.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"50%",flexDirection:"column",textAlign:"center"},children:[(0,j.jsx)(k.Z,{sx:{width:"100%"},children:(0,j.jsx)(m.Z,{variant:"determinate",value:F?40:H?90:100})}),(0,j.jsx)(k.Z,{sx:{width:"100%"},children:(0,j.jsx)("h2",{children:F?"Read data....":H?"Process data...":"Done!"})})]})})]})}}}]);
//# sourceMappingURL=478.1d17d9ab.chunk.js.map