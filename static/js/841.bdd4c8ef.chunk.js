"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[841],{48563:function(e,n,t){t.d(n,{xB:function(){return j},ZP:function(){return L}});var r=t(1413),i=t(29439),a=t(72791),o=t.p+"static/media/earth-night.da273783100dfbfd07c0.jpg",c=t.p+"static/media/earth-blue-marble.7deee995d548fe65faff.jpg",l=t(36431),u=t(27361),s=t(36314),d=t(43146),f=t(31857),h=t(5849),v=(t(26719),t(53329)),g=t(74165),b=t(15861),p=(t(88063),function(){var e=(0,b.Z)((0,g.Z)().mark((function e(n,t){var r,i,a,o;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.renderer(),i=n.scene(),a=n.camera(),r.render(i,a),o=r.domElement.toDataURL(),m(o,t);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),m=function(e,n){var t=window.document.createElement("a");t.style="display:none;",t.download=n,t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),t.remove()},y=p,C=t(35585),Z=t(42419),x=t(13967),k=t(80184),j=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],_=u.BYU().range([.01,.7]),S=u.BYU().range([.3,.4]),w=u.BYU().range([.1,1]),R=(0,a.forwardRef)((function(e,n){var t=e.locs,g=e.countries,b=e.width,p=e.height,m=e.onSelect,R=e.onSelectLegend,L=e.getSwitchView,E=e.zoomLoc,K=(e.toolbarRef,(0,a.useRef)()),A=(0,a.useRef)(),G=(0,a.useState)("Location_RG_Country"),B=(0,i.Z)(G,2),D=B[0],I=(B[1],(0,a.useState)()),O=(0,i.Z)(I,2),P=O[0],z=O[1],T=(0,a.useState)(0),V=(0,i.Z)(T,2),W=V[0],M=V[1],F=(0,a.useState)([{lat:-92.52824601944323,lng:38.31079101844495,altitude:1.8},{lat:51.58421865,lng:45.9571029,altitude:1.8},{lat:31.3037101,lng:-89.29276214,altitude:1.8},{lat:33.5842591,lng:-101.8804709,altitude:1.8}]),U=(0,i.Z)(F,2),N=U[0],Y=U[1],H=(0,a.useState)([]),Q=(0,i.Z)(H,2),X=Q[0],$=Q[1],q=(0,a.useState)({}),J=(0,i.Z)(q,2),ee=(J[0],J[1]),ne=(0,x.Z)(),te=(0,a.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ececec",n=u.PKp(j),t=function(t){if(!t||""===t||""===t.trim)return"black";var r=n.domain();return r.find((function(e){return e===t}))||r.length<20?n(t):e};return t.domain=n.domain,t.range=n.range,t}()}),[]);function re(e){var n=e.locs,t=e.countries,r={},i=u.Wem(n,(function(e){return null===e||void 0===e?void 0:e.count}));_.domain(i),S.domain(i),w.domain(u.Wem(t,(function(e){return r[e.title]=e,null===e||void 0===e?void 0:e.count}))),te.domain([]).range(j),t.forEach((function(e){return te(e.title)}));var a=0;return t.length>3&&[0,1,2,3,0].forEach((function(e){N[a]||(N[a]={lat:0,lng:0,altitude:1}),N[a].lat=t[e].lat,N[a].lng=t[e].long,a++})),{MAP_CENTERs:N,contriesMap:r}}(0,a.useEffect)((function(){var e=re({locs:t,countries:g}),n=e.MAP_CENTERs,r=e.contriesMap;ee(r),Y(n),E||M(0)}),[t,g]);var ie=(0,a.useState)(null),ae=(0,i.Z)(ie,2),oe=ae[0],ce=ae[1];(0,a.useEffect)((function(){if(K.current&&W<N.length){var e=setTimeout((function(){K.current.pointOfView(N[W],4e3),M(W+1)}),4e3);return ce(e),function(){clearInterval(e)}}}),[W,N]);var le=(0,a.useCallback)((function(){oe&&clearInterval(oe),M(N.length)}),[oe]),ue=(0,a.useState)(null),se=(0,i.Z)(ue,2),de=se[0],fe=se[1],he=(0,a.useCallback)((function(e,n){if(K.current){le(),K.current.pointOfView({lat:n,lng:e,altitude:2},2e3),$([{lng:e,lat:n}]),de&&clearInterval(de);var t=setTimeout((function(){$([])}),1e4);fe(t)}}),[W,le,de]);(0,a.useEffect)((function(){return E&&he(E.lng,E.lat),function(){de&&clearInterval(de)}}),[E]);var ve=(0,a.useCallback)((function(){y(K.current,"MIRAGE-mc")}),[A,K]);(0,a.useEffect)((function(){R("selectCountry",(function(e){m({Location_RG_Country:[e.title]}),he(e.long,e.lat)}))}),[he,m]);var ge=(0,a.useCallback)((function(){if(K.current){var e=(0,r.Z)({},K.current.pointOfView());e.altitude=e.altitude/2,K.current.pointOfView(e,2e3)}}),[K]),be=(0,a.useCallback)((function(){if(K.current){var e=(0,r.Z)({},K.current.pointOfView());e.altitude=2*e.altitude,K.current.pointOfView(e,2e3)}}),[K]);return(0,k.jsxs)("div",{style:{background:"#ffffff",position:"relative"},children:[(0,k.jsx)("div",{ref:A,style:{},children:(0,k.jsx)(l.Z,{width:b,height:p,ref:K,globeImageUrl:"dark"===ne.palette.mode?o:c,backgroundColor:"dark"===ne.palette.mode?"black":"#7ec7f6",showAtmosphere:!0,ringsData:X,ringColor:function(){return"#D39F49"},ringResolution:1e3,ringMaxRadius:5,ringPropagationSpeed:5,ringRepeatPeriod:500,labelsData:g,labelLat:(0,a.useCallback)((function(e){return e.lat}),[]),labelLng:(0,a.useCallback)((function(e){return e.long}),[]),labelAltitude:(0,a.useCallback)((function(e){return P&&P.Location_RG_Country===e.title?.05:.02}),[P]),labelText:(0,a.useCallback)((function(e){return e.title}),[]),labelSize:(0,a.useCallback)((function(e){return P&&P.Location_RG_Country===e.title?1:S(null===e||void 0===e?void 0:e.count)}),[P]),labelDotRadius:0,labelColor:(0,a.useCallback)((function(e){var n;return null!==(n=e.color)&&void 0!==n?n:"white"}),[P]),labelResolution:2,hexBinPointsData:t,hexBinPointWeight:"count",hexBinPointLng:(0,a.useCallback)((function(e){return e.long}),[]),hexBinPointLat:(0,a.useCallback)((function(e){return e.lat}),[]),hexAltitude:(0,a.useCallback)((function(e){return _(e.sumWeight)}),[]),hexBinResolution:4,hexTopColor:(0,a.useCallback)((function(e){return te(e.points[0][D])}),[]),hexSideColor:(0,a.useCallback)((function(e){return te(e.points[0][D])}),[]),hexBinMerge:!1,onHexHover:(0,a.useCallback)((function(e){z(e?e.points[0]:void 0)}),[]),hexLabel:(0,a.useCallback)((function(e){return'<div class="overlay-holder">\n            <div class="overlay-header">\n                <span><b>'.concat(u.Smz(e.points,(function(e){return null===e||void 0===e?void 0:e.count})),'</b> stations</span>\n            </div>\n            <div class="overlay-content">\n            <table>\n                <tbody><tr>').concat(e.points.slice().sort((function(e,n){return(null===n||void 0===n?void 0:n.count)-(null===e||void 0===e?void 0:e.count)})).map((function(e){return"<td>[".concat(null===e||void 0===e?void 0:e.count,"]</td><td>").concat(e.title,"</td>")})).join("</tr><tr>"),"</tr></tbody>\n            </table>\n            </div>\n          </div>")}),[]),onHexClick:function(e){var n,t=[];e.points.forEach((function(e){t.push(e.Location_RG_City)})),m({Location_RG_City:t,Location_RG_Country:[null===(n=e.points[0])||void 0===n?void 0:n.Location_RG_Country]})},onGlobeClick:le})}),(0,k.jsxs)(s.Z,{sx:{position:"absolute",right:0,top:0,margin:1},direction:"row",children:[L&&(0,k.jsx)("div",{children:(0,k.jsx)(d.Z,{value:"check",selected:L(),onChange:function(){var e=L();L(!e)},children:L()?"All Data":"Reviewed Data"})}),(0,k.jsxs)(f.Z,{orientation:"vertical","aria-label":"map tool",variant:"contained",sx:{"& button":{padding:1}},children:[(0,k.jsx)(h.Z,{onClick:ve,children:(0,k.jsx)(v.Z,{})}),(0,k.jsx)(h.Z,{onClick:ge,children:(0,k.jsx)(Z.Z,{})}),(0,k.jsx)(h.Z,{onClick:be,children:(0,k.jsx)(C.Z,{})})]})]})]})})),L=R},78305:function(e,n,t){t.d(n,{XU:function(){return l},dS:function(){return u},eb:function(){return s}});var r=t(93433),i=(t(72426),t(13034)),a=t(90462),o=t(32588),c=t(80184),l=[{id:"inBasket",header:"Selected",accessorKey:"inBasket",Cell:function(e){e.renderedCellValue;var n=e.row;return(0,c.jsx)(i.Z,{disabled:!0,size:"small",icon:(0,c.jsx)(a.Z,{}),checkedIcon:(0,c.jsx)(o.Z,{color:"secondary"}),checked:n.original.inBasket})},size:50,minSize:50,filterDisable:!0},{accessorKey:"Location_RG_City",header:"City"},{accessorKey:"Location_RG_Country",header:"Country"},{accessorKey:"Station_RG_Name",header:"Station",filterDisable:!0},{accessorKey:"Station_AR_Genre",header:"Station Genre",Cell:function(e){var n=e.renderedCellValue;e.row;return(0,c.jsx)(c.Fragment,{children:(null!==n&&void 0!==n?n:[]).join(", ")})}},{accessorKey:"Artist_SP_Name",header:"Artist",cat:"artist",dynamic:!0},{accessorKey:"Track_SP_Name",header:"Event",dynamic:!0}],u=l.filter((function(e,n){return n})),s=[].concat((0,r.Z)(l.filter((function(e){return!e.filterDisable}))),[{accessorKey:"Artist_WD_Country",header:"Artist Country ",cat:"artist",dynamic:!0},{accessorKey:"Artist_SP_Genre",header:"Artist Genre ",cat:"artist",dynamic:!0},{accessorKey:"Artist_WD_Genders",header:"Artist Gender",cat:"artist",dynamic:!0},{accessorKey:"Artist_WD_SexualOrientations",header:"Artist Sexualorientations ",cat:"artist",dynamic:!0},{accessorKey:"Artist_WD_Ethnicities",header:"Artist Ethnicities ",cat:"artist",dynamic:!0}])},60868:function(e,n,t){t.d(n,{Z:function(){return G}});var r=t(1413),i=t(29439),a=t(72791),o=t(78687),c=t(49079),l=(t(69824),t(80915)),u=t(36314),s=t(5849),d=t(78305),f=t(24096),h=t(21809),v=t(45363),g=t(84701),b=t(82626),p=t(93006),m=t(90977),y=t(86711),C=t(45987),Z=t(46314),x=t(80184),k=["onInputChange"];function j(e){var n=e.onInputChange,t=void 0===n?function(){}:n,o=(0,C.Z)(e,k),c=a.useState(""),l=(0,i.Z)(c,2),u=l[0],s=l[1];return(0,x.jsx)(Z.Z,(0,r.Z)({inputValue:u,onInputChange:function(e,n,r){s(n),t(e,n,r)},onBlur:function(){s("")}},o))}var _=t(77262),S=["children","role"],w=a.forwardRef((function(e,n){var t=e.children,i=e.role,o=(0,C.Z)(e,S),c=Array.isArray(t)?t.length:0,l=(0,a.useRef)(null);return(0,x.jsx)("div",{ref:n,role:i,children:(0,x.jsx)("div",(0,r.Z)((0,r.Z)({},o),{},{ref:l,children:(0,x.jsx)(_.ViewportList,{viewportRef:l,items:t,count:c,children:function(e){var n=e.props,t=e.type;return(0,a.createElement)(t,(0,r.Z)((0,r.Z)({},n),{},{key:n.id}))}})}))})})),R=[],L={};function E(e){var n,t,l=e.options,s=void 0===l?R:l,d=e.enabled,f=void 0===d?L:d,h=e.filterOptionsFunc,C=e.cat,Z=void 0===C?"":C,k=e.filterOptions,_=e.searchByStream,S=e.getList,E=e.isLoading,K=e.logEvents,A=a.useState({}),G=(0,i.Z)(A,2),B=G[0],D=G[1],I=(0,o.I0)(),O=(0,o.v9)(c.mj);(0,a.useEffect)((function(){""!==Z&&D(s.find((function(e){return e.accessorKey===Z})))}),[Z]);return(0,x.jsx)(a.Fragment,{children:(0,x.jsxs)(u.Z,{direction:"row",children:[(0,x.jsx)(v.Z,{sx:{minWidth:120},children:(0,x.jsx)(g.Z,{value:Z,onChange:function(e){I((0,c.Tv)({key:e.target.value,value:[],prekey:Z}))},size:"small",children:s.map((function(e){return(0,x.jsx)(b.Z,{value:e.accessorKey,disabled:f[e.accessorKey],children:e.header},e.accessorKey)}))})}),(0,x.jsx)(j,{disabled:""===Z,fullWidth:!0,multiple:!0,size:"small",limitTags:2,filterOptions:h,ListboxComponent:w,freeSolo:!0,options:null!==(n=B.dynamic?S("search-".concat(B.accessorKey)):k[B.accessorKey])&&void 0!==n?n:[],loading:!!B.dynamic&&E("search-".concat(B.accessorKey)),getOptionLabel:function(e){return e},value:null!==(t=O[B.accessorKey])&&void 0!==t?t:[],onChange:function(e,n){""!==n&&n&&n.length&&K("search",{search_term:n,key:B.accessorKey}),I((0,c.Tv)({key:B.accessorKey,value:n}))},onInputChange:B.dynamic?function(e,n){n&&""!==n&&_(B.accessorKey,n,B.cat)}:void 0,renderInput:function(e){return(0,x.jsx)(p.Z,(0,r.Z)({},e))}},B.accessorKey),""!==Z&&(0,x.jsx)(m.Z,{"aria-label":"close",size:"small",onClick:function(){I((0,c.kh)({key:Z}))},children:(0,x.jsx)(y.Z,{fontSize:"inherit"})})]})})}var K=(0,l.D)(),A=function(e,n){return K(e,n).slice(0,50)};function G(){var e=(0,a.useState)({}),n=(0,i.Z)(e,2),t=n[0],l=n[1],v=(0,f.Wz)(),g=v.isLoading,b=v.searchByStream,p=v.getList,m=(0,a.useState)({}),y=(0,i.Z)(m,2),C=y[0],Z=y[1],k=(0,o.v9)(c.i9),j=(0,o.v9)(c.YQ),_=(0,o.I0)(),S=(0,h.Tx)().logEvents;(0,a.useEffect)((function(){var e={};k.forEach((function(n){e[n]=!0})),Z(e)}),[k]);var w=p("fields");return(0,a.useEffect)((function(){l((0,r.Z)({},w))}),[w]),(0,x.jsxs)(u.Z,{spacing:2,padding:2,children:[k.map((function(e,n){return(0,x.jsx)(E,{order:n,cat:e,options:d.eb,enabled:C,getList:p,filterOptionsFunc:A,filterOptions:t,isLoading:g,logEvents:S,searchByStream:b},n)})),k.length<d.eb.length&&(0,x.jsx)(s.Z,{variant:"contained",disabled:j,onClick:function(){_((0,c.Tv)({key:""}))},children:"Add filter"})]})}},7655:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(36314),i=t(31857),a=t(5849),o=t(68087),c=t(65370),l=t(80184);function u(e){var n=e.title,t=e.onChange;return(0,l.jsxs)(r.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[n,(0,l.jsxs)(i.Z,{size:"small",variant:"outlined","aria-label":"outlined button group",sx:{color:"unset"},children:[(0,l.jsx)(a.Z,{sx:{color:"unset"},onClick:function(){return t(!0)},children:(0,l.jsx)(o.Z,{})}),(0,l.jsx)(a.Z,{sx:{color:"unset"},onClick:function(){return t(!1)},children:(0,l.jsx)(c.Z,{})})]})]})}},37041:function(e,n,t){t(72791),t(24096),t(26719),t(27361),t(48563),t(80184)},26719:function(e,n,t){t.d(n,{x:function(){return o}});var r=t(1413),i=t(36395),a=t(27361);function o(e){var n=(0,a.$_Y)(e);return n.opacity=.5,n.toString()}n.Z=function(e,n,t,a,o){if(n)for(var c=0;c<n.length;c++)if(n[c].id===e){var l=n[c].source,u=null!=l&&l instanceof Function?l(t?"dark":"light",o):l,s=null!=u?u.palette:{};return(0,i.Z)((0,r.Z)((0,r.Z)({},u),{},{palette:(0,r.Z)((0,r.Z)({},s),{},{mode:t?"dark":"light"}),direction:a?"rtl":"ltr"}))}return(0,i.Z)({palette:{mode:t?"dark":"light"},direction:a?"rtl":"ltr"})}}}]);
//# sourceMappingURL=841.bdd4c8ef.chunk.js.map