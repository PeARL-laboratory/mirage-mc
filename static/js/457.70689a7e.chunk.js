"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[457],{14101:function(t,e,a){a.d(e,{ZP:function(){return D},Wz:function(){return y}});var n=a(72791),i=n.createContext(null),r=a(80184),o=a(29439),s=a(4942),c=a(1413),l=a(84136),u=a(763),d=a.p+"static/media/stations_listed.62a01fcccd6c8d8910be.csv",f=a.p+"static/media/locations_listed.f85c1cdb7238c3b3b584.csv",m=a.p+"static/media/metadata.508f1effc7264ccc4778.csv",v=a.p+"static/media/streamDetail.2db5fb2c64b18016cd7d.csv";function p(t,e){var a=e.type,n=e.path,i=e.isLoading,r=void 0!==i&&i,o=e.error,l=void 0!==o&&o,u=e.hasError,d=void 0!==u&&u,f=e.value;switch(a){case"LOADING_CHANGED":return(0,c.Z)((0,c.Z)({},t),{},(0,s.Z)({},n,(0,c.Z)((0,c.Z)({},t[n]),{},{isLoading:r})));case"VALUE_CHANGE":return(0,c.Z)((0,c.Z)({},t),{},(0,s.Z)({},n,(0,c.Z)((0,c.Z)({},t[n]),{},{value:f,isLoading:r,error:l,hasError:d})));case"INIT":return(0,c.Z)((0,c.Z)({},t),{},{isInit:f});default:throw new Error}}var g={rawData:{value:{stationData:[],locationData:[],metaData:[],streamDetail:[]}},locs:{},countries:{},events:{},loading:!1,error:!1,isInit:!1},D=function(t){var e=t.children,a=(0,n.useReducer)(p,g),s=(0,o.Z)(a,2),D=s[0],y=s[1];(0,n.useEffect)((function(){if(!D.rawData.isLoading&&!D.rawData.value.metaData.length){1;try{console.time("Load and process data"),console.time("-Load data-"),y({type:"LOADING_CHANGED",path:"rawData",isLoading:!0}),y({type:"LOADING_CHANGED",path:"locs",isLoading:!0}),y({type:"LOADING_CHANGED",path:"countries",isLoading:!0}),Promise.all([(0,l.gyn)(d),(0,l.gyn)(f),(0,l.gyn)(m),(0,l.gyn)(v)]).then((function(t){var e=(0,o.Z)(t,4),a=e[0],n=e[1],i=e[2],r=e[3];console.timeEnd("-Load data-"),console.time("-Correct data-");var s={};n.forEach((function(t){t.lat=+t.longitude,t.long=+t.latitude,delete t.longitude,delete t.latitude,s[t.city_id]=t}));var u={};a.forEach((function(t){t.lat=s[t.city_id].lat,t.long=s[t.city_id].long,t.country=s[t.city_id].country,t.city=s[t.city_id].city,u[t.station_id]=t})),i.forEach((function(t){t.station_genre=u[t.station_id].station_genre,t.city=s[t.city_id].city,t.country=s[t.city_id].country,t.station=u[t.station_id].station,t.stream_artist=r[t.stream_detail_id].stream_artist,t.stream_song=r[t.stream_detail_id].stream_song}));var d={stationData:a,locationData:n,metaData:i,streamDetail:r,stationDataMap:u,locationDataMap:s};y({type:"VALUE_CHANGE",path:"rawData",value:d,isLoading:!1}),console.timeEnd("-Correct data-"),console.time("-filterdata-");var f=function(t){var e=t.stationData,a=t.locationData,n=t.metaData,i=(0,l.Xxj)(e,(function(t){return t.city_id}));console.time("---group meta---");var r=(0,l.ruo)(a,(function(t){return t.city_id})),o=(0,l.ruo)(n,(function(t){return t.city_id}));console.timeEnd("---group meta---");var s=i.map((function(t){var e,a,n,i=null!==(e=o.get(t[0]))&&void 0!==e?e:[],s=null!==(a=(null!==(n=r.get(t[0]))&&void 0!==n?n:[])[0])&&void 0!==a?a:{};return(0,c.Z)((0,c.Z)({},s),{},{title:"".concat(s.city," - ").concat(s.country),count:t[1].length,values:t[1],city:[[s.city,i]].map((function(t){return t.title=t[0],t.count=t[1].length,t}))})}));return s.sort((function(t,e){return e.count-t.count})),{locs:s,countries:(0,l.Xxj)(e,(function(t){return t.country})).map((function(t){return{title:t[0],long:(0,l.J69)(t[1],(function(t){return t.long})),lat:(0,l.J69)(t[1],(function(t){return t.lat})),count:t[1].length,values:t[1]}})).sort((function(t,e){return e.count-t.count}))}}(d),m=f.locs,v=f.countries;y({type:"VALUE_CHANGE",path:"locs",value:m,isLoading:!1}),y({type:"VALUE_CHANGE",path:"countries",value:v,isLoading:!1}),console.timeEnd("-filterdata-"),console.timeEnd("Load and process data")}))}catch(t){y({type:"ERROR",path:"rawData",isLoading:!1,error:t,hasError:!0}),y({type:"ERROR",path:"locs",isLoading:!1,error:t,hasError:!0}),y({type:"ERROR",path:"countries",isLoading:!1,error:t,hasError:!0})}}}),[]);var h=(0,n.useCallback)((function(t){return!!D[t]&&D[t].error}),[D]),_=(0,n.useCallback)((function(t){return D[t]&&D[t].value?D[t].value:[]}),[D]),x=(0,n.useCallback)((function(t){switch(t){case"city":return D.rawData&&D.rawData.value.locationData?D.rawData.value.locationData.map((function(t){return t.city})):[];case"country":return D.countries&&D.countries.value?D.countries.value.map((function(t){return t.title})):[];case"station":return D.rawData&&D.rawData.value.stationData?(0,u.uniq)(D.rawData.value.stationData.map((function(t){return t.station}))):[];case"station_genre":return D.rawData&&D.rawData.value.metaData?(0,u.uniq)(D.rawData.value.metaData.map((function(t){return t.station_genre}))):[];case"stream_artist":return D.rawData&&D.rawData.value.streamDetail?(0,u.uniq)(D.rawData.value.streamDetail.map((function(t){return t.stream_artist}))):[];case"stream_song":return D.rawData&&D.rawData.value.streamDetail?(0,u.uniq)(D.rawData.value.streamDetail.map((function(t){return t.stream_song}))):[];default:return[]}}),[D]),w=(0,n.useCallback)((function(){return D.events&&D.events.value?D.events.value:[]}),[D]),L=(0,n.useCallback)((function(t,e){y({type:"LOADING_CHANGED",path:"events",isLoading:!0}),new Promise((function(a,n){var i,r=(null!==(i=D.rawData.value)&&void 0!==i?i:{metaData:[]}).metaData.slice();Object.keys(t).forEach((function(e){t[e]&&r.length&&((0,u.isArray)(t[e])?t[e].length&&(r=r.filter((function(a){return t[e].find((function(t){return t===a[e]}))}))):t[e]&&(r=r.filter((function(a){return a[e]===t[e]}))))}));var o=r.slice(0,e);y({type:"VALUE_CHANGE",path:"events",value:o,isLoading:!1}),a(o)}))}),[D]),Z=(0,n.useCallback)((function(t){var e=(D.events&&D.events.value?D.events.value:[]).find((function(e){return e.stream_detail_id===t}));return e?C(e,D.rawData.value.stationDataMap,D.rawData.value.locationDataMap,D.rawData.value.streamDetail):null}),[D]);function C(t,e,a,n){return(0,c.Z)((0,c.Z)({},t),{},{station_description:e[t.station_id].station_description,station_url:e[t.station_id].station_url,lat:a[t.city_id].lat,long:a[t.city_id].long,url:e[t.station_id].url},n[t.stream_detail_id])}var E=(0,n.useCallback)((function(t){var e;if(t){var a,n=(null!==(a=D.rawData.value)&&void 0!==a?a:{metaData:[]}).metaData;return t.sort((function(t,e){return t-e})).map((function(t){return C(n[t],D.rawData.value.stationDataMap,D.rawData.value.locationDataMap,D.rawData.value.streamDetail)}))}return(null!==(e=D.rawData.value)&&void 0!==e?e:{metaData:[]}).metaData.map((function(t){return C(t,D.rawData.value.stationDataMap,D.rawData.value.locationDataMap,D.rawData.value.streamDetail)}))}),[D]),b=(0,n.useCallback)((function(t){return!!D[t]&&D[t].isLoading}),[D]);return(0,r.jsx)(i.Provider,{value:{getList:_,getEvents:w,requestEvents:L,getDistinctField:x,getDetail:Z,getListError:h,getDownloadData:E,isLoading:b},children:e})};function y(){return(0,n.useContext)(i)}},78305:function(t,e,a){a.d(e,{X:function(){return n},e:function(){return i}});var n=[{accessorKey:"city",header:"City"},{accessorKey:"country",header:"Country"},{accessorKey:"station",header:"Station"},{accessorKey:"station_genre",header:"Station Genre"},{accessorKey:"stream_artist",header:"Artist"},{accessorKey:"stream_song",header:"Song"},{accessorKey:"time_station",header:"Time",filterDisable:!0}],i=n.filter((function(t){return!t.filterDisable}))},92326:function(t,e,a){a.r(e),a.d(e,{default:function(){return J}});var n=a(1413),i=a(72791),r=a(7538),o=a.n(r),s=a(79397),c=a.n(s),l=a(11015),u=a(61862),d=a(42404),f=a(57689),m=a(93539),v=a(80349),p=a(11068),g=a(95321),D=a(76019),y=a(22779),h=a(32815),_=a(92392),x=a(6058),w=a(69550),L=a(91490),Z=a(95074),C=a(16737),E=a(1116),b=a(8712),T=a(56309),I=a(91891),M=a(29439),A=a(78687),j=a(49079),k=(a(69824),a(15927)),N=a(67414),R=a(46314),G=a(93006),O=a(78305),H=a(14101),K=a(45987),V=a(77262),S=a(80184),q=["children","role"],P=i.forwardRef((function(t,e){var a=t.children,r=t.role,o=(0,K.Z)(t,q),s=Array.isArray(a)?a.length:0,c=(0,i.useRef)(null);return(0,S.jsx)("div",{ref:e,role:r,children:(0,S.jsx)("div",(0,n.Z)((0,n.Z)({},o),{},{ref:c,children:(0,S.jsx)(V.ViewportList,{viewportRef:c,items:a,count:s,children:function(t){var e=t.props,a=t.type;return(0,i.createElement)(a,(0,n.Z)((0,n.Z)({},e),{},{key:e.id}))}})}))})})),U=(0,k.D)(),z=function(t,e){return U(t,e).slice(0,50)};function F(){var t=(0,A.v9)(j.mj),e=(0,A.I0)(),a=(0,i.useState)({}),r=(0,M.Z)(a,2),o=r[0],s=r[1],c=(0,H.Wz)(),l=c.isLoading,u=c.getDistinctField;return(0,i.useEffect)((function(){if(!l("rawData")&&!l("countries")){console.log("here");var t={};O.e.forEach((function(e){t[e.accessorKey]=u(e.accessorKey)})),s(t)}}),[l("rawData"),l("countries")]),(0,S.jsx)(N.Z,{spacing:2,padding:2,children:O.e.map((function(a){var i,r;return(0,S.jsx)(R.Z,{multiple:!0,size:"small",limitTags:2,filterOptions:z,ListboxComponent:P,options:null!==(i=o[a.accessorKey])&&void 0!==i?i:[],value:null!==(r=t[a.accessorKey])&&void 0!==r?r:[],defaultValue:null,onChange:function(t,n){e((0,j.Tv)({key:a.accessorKey,value:n}))},renderInput:function(t){return(0,S.jsx)(G.Z,(0,n.Z)((0,n.Z)({},t),{},{label:a.header}))}})}))})}var X=function(t){var e=t.intl,a=t.updateLocale,n=t.locale,i=t.menuContext,r=t.themeContext,o=t.a2HSContext,s=t.auth,c=i.toggleThis,l=i.isDesktop,u=(i.isAuthMenuOpen,i.isMiniSwitchVisibility),d=r.themeID,f=r.setThemeID,m=r.isRTL,v=r.toggleThisTheme,p=s.auth,g=(s.setAuth,o.isAppInstallable),M=o.isAppInstalled,A=o.deferredPrompt,j=T.Z.map((function(t){return{value:void 0,visible:!0,primaryText:e.formatMessage({id:t.locale}),onClick:function(){a(t.locale)},leftIcon:(0,S.jsx)(D.Z,{})}})),k=p.isAuthenticated,N=I.Z.map((function(t){return{value:void 0,visible:!0,primaryText:e.formatMessage({id:t.id}),onClick:function(){f(t.id)},leftIcon:(0,S.jsx)(y.Z,{style:{color:t.color}})}}));return[{value:null,onClick:function(){A.prompt()},primaryText:e.formatMessage({id:"filter",defaultMessage:"Filter"}),leftIcon:(0,S.jsx)(h.Z,{}),primaryTogglesNestedList:!0,nestedItems:[{primaryText:(0,S.jsx)(F,{})}]},{value:"/",visible:k,primaryText:e.formatMessage({id:"home"}),leftIcon:(0,S.jsx)(_.Z,{})},{value:"/about",visible:!0,primaryText:e.formatMessage({id:"about"}),leftIcon:(0,S.jsx)(x.Z,{})},{divider:!0},{primaryText:e.formatMessage({id:"settings"}),primaryTogglesNestedList:!0,leftIcon:(0,S.jsx)(w.Z,{}),nestedItems:[{primaryText:e.formatMessage({id:"theme"}),secondaryText:e.formatMessage({id:d}),primaryTogglesNestedList:!0,leftIcon:(0,S.jsx)(y.Z,{}),nestedItems:N},{primaryText:e.formatMessage({id:"language"}),secondaryText:e.formatMessage({id:n}),primaryTogglesNestedList:!0,leftIcon:(0,S.jsx)(D.Z,{}),nestedItems:j},{visible:!!l,onClick:function(){c("isMiniSwitchVisibility")},primaryText:e.formatMessage({id:"menu_mini_mode"}),leftIcon:u?(0,S.jsx)(L.Z,{}):(0,S.jsx)(Z.Z,{})},{onClick:function(){v("isRTL")},primaryText:"".concat(m?"LTR":"RTL"," mode"),leftIcon:m?(0,S.jsx)(C.Z,{}):(0,S.jsx)(E.Z,{})}]},{value:null,visible:g&&!M,onClick:function(){A.prompt()},primaryText:e.formatMessage({id:"install",defaultMessage:"Install"}),leftIcon:(0,S.jsx)(b.Z,{})}]},J=function(t){var e=(0,m.Z)(),a=(0,f.s0)(),i=(0,f.TH)(),r=(0,u.aC)(),s=(0,p.useMenu)(),D=(0,l.OA)(),y=s||{},h=y.toggleThis,_=y.isMiniMode,x=y.isMiniSwitchVisibility,w=(0,d.useConfig)().appConfig,L=(0,v.useLocale)(),Z=L.setLocale,C=L.locale,E=void 0===C?"en":C,b=(0,g.useTheme)(),T=X((0,n.Z)({intl:e,locale:E,updateLocale:Z,menuContext:s,themeContext:b,appConfig:w,a2HSContext:D,auth:r},t)).filter((function(t){return!1!==t.visible})),I=i?i.pathname:"/";return(0,S.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:(0,S.jsx)(o(),{style:{flex:1},children:(0,S.jsx)(c(),{onIndexChange:function(t,e){void 0!==e&&h("isMobileMenuOpen",!1),void 0!==e&&e!==Object(e)&&a(e)},useMinified:_,items:T,index:I},x+b.isRTL)})})}}}]);
//# sourceMappingURL=457.70689a7e.chunk.js.map