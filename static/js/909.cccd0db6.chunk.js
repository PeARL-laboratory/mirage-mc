"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[909],{84254:function(e,n,t){t.d(n,{GS:function(){return p},xB:function(){return x},ZP:function(){return j}});var i=t(29439),r=t(72791),o=t.p+"static/media/earth-night.da273783100dfbfd07c0.jpg",a=t(36431),l=t(75483),c=t(96174),u=t(90977),s=(t(26719),t(53329)),d=t(74165),f=t(15861),g=(t(88063),function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n,t){var i,r,o,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.renderer(),r=n.scene(),o=n.camera(),i.render(r,o),a=i.domElement.toDataURL(),m(a,t);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),m=function(e,n){var t=window.document.createElement("a");t.style="display:none;",t.download=n,t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),t.remove()},h=g,v=t(80184),p=20,x=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],y=l.BYU().range([.01,.7]),b=l.BYU().range([.3,.4]),C=l.BYU().range([.1,1]),Z=(0,r.forwardRef)((function(e,n){var t=e.locs,d=e.countries,f=e.width,g=e.height,m=e.onSelect,Z=e.onSelectLegend,j=e.zoomLoc,k=e.toolbarRef,T=(0,r.useRef)(),I=(0,r.useRef)(),M=(0,r.useState)("country"),S=(0,i.Z)(M,2),L=S[0],w=(S[1],(0,r.useState)()),R=(0,i.Z)(w,2),A=R[0],E=R[1],B=(0,r.useState)(0),K=(0,i.Z)(B,2),z=K[0],D=K[1],P=(0,r.useState)([{lat:-92.52824601944323,lng:38.31079101844495,altitude:1.8},{lat:51.58421865,lng:45.9571029,altitude:1.8},{lat:31.3037101,lng:-89.29276214,altitude:1.8},{lat:33.5842591,lng:-101.8804709,altitude:1.8}]),_=(0,i.Z)(P,2),O=_[0],U=_[1],Y=(0,r.useState)([]),F=(0,i.Z)(Y,2),H=F[0],V=F[1],W=(0,r.useState)({}),N=(0,i.Z)(W,2),G=(N[0],N[1]),X=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ececec",n=l.PKp(x),t=function(t){if(!t||""===t||""===t.trim)return"black";var i=n.domain();return i.find((function(e){return e===t}))||i.length<p?n(t):e};return t.domain=n.domain,t.range=n.range,t}()}),[]);function $(e){var n=e.locs,t=e.countries,i={},r=l.Wem(n,(function(e){return null===e||void 0===e?void 0:e.count}));y.domain(r),b.domain(r),C.domain(l.Wem(t,(function(e){return i[e.title]=e,null===e||void 0===e?void 0:e.count}))),X.domain([]).range(x),t.forEach((function(e){return X(e.title)}));var o=0;return t.length>3&&[0,1,2,3,0].forEach((function(e){O[o]||(O[o]={lat:0,lng:0,altitude:1}),O[o].lat=t[e].lat,O[o].lng=t[e].long,o++})),{MAP_CENTERs:O,contriesMap:i}}(0,r.useEffect)((function(){var e=$({locs:t,countries:d}),n=e.MAP_CENTERs,i=e.contriesMap;G(i),U(n),j||D(0)}),[t,d]);var q=(0,r.useState)(null),J=(0,i.Z)(q,2),Q=J[0],ee=J[1];(0,r.useEffect)((function(){if(T.current&&z<O.length){var e=setTimeout((function(){T.current.pointOfView(O[z],4e3),D(z+1)}),4e3);return ee(e),function(){clearInterval(e)}}}),[z,O]);var ne=(0,r.useCallback)((function(){Q&&clearInterval(Q),D(O.length)}),[Q]),te=(0,r.useState)(null),ie=(0,i.Z)(te,2),re=ie[0],oe=ie[1],ae=(0,r.useCallback)((function(e,n){if(T.current){ne(),T.current.pointOfView({lat:n,lng:e,altitude:1.2},2e3),V([{lng:e,lat:n}]),re&&clearInterval(re);var t=setTimeout((function(){V([])}),1e4);oe(t)}}),[z,ne,re]);(0,r.useEffect)((function(){return j&&ae(j.lng,j.lat),function(){re&&clearInterval(re)}}),[j]);var le=(0,r.useCallback)((function(){h(T.current,"MIRAGE-mc")}),[I,T]);return(0,r.useEffect)((function(){Z("selectCountry",(function(e){m({country:[e.title]}),ae(e.long,e.lat)}))}),[ae,m]),(0,v.jsxs)("div",{style:{background:"#000010",position:"relative"},children:[(0,v.jsx)("div",{ref:I,style:{},children:(0,v.jsx)(a.Z,{width:f,height:g,ref:T,globeImageUrl:o,showAtmosphere:!0,ringsData:H,ringColor:function(){return"#D39F49"},ringResolution:1e3,ringMaxRadius:5,ringPropagationSpeed:5,ringRepeatPeriod:500,labelsData:d,labelLat:(0,r.useCallback)((function(e){return e.lat}),[]),labelLng:(0,r.useCallback)((function(e){return e.long}),[]),labelAltitude:(0,r.useCallback)((function(e){return A&&A.country===e.title?.05:.02}),[A]),labelText:(0,r.useCallback)((function(e){return e.title}),[]),labelSize:(0,r.useCallback)((function(e){return A&&A.country===e.title?1:b(null===e||void 0===e?void 0:e.count)}),[A]),labelDotRadius:0,labelColor:(0,r.useCallback)((function(e){var n;return null!==(n=e.color)&&void 0!==n?n:"white"}),[A]),labelResolution:2,hexBinPointsData:t,hexBinPointWeight:"count",hexBinPointLng:(0,r.useCallback)((function(e){return e.long}),[]),hexBinPointLat:(0,r.useCallback)((function(e){return e.lat}),[]),hexAltitude:(0,r.useCallback)((function(e){return y(e.sumWeight)}),[]),hexBinResolution:4,hexTopColor:(0,r.useCallback)((function(e){return X(e.points[0][L])}),[]),hexSideColor:(0,r.useCallback)((function(e){return X(e.points[0][L])}),[]),hexBinMerge:!1,onHexHover:(0,r.useCallback)((function(e){E(e?e.points[0]:void 0)}),[]),hexLabel:(0,r.useCallback)((function(e){return'<div class="overlay-holder">\n            <div class="overlay-header">\n                <span><b>'.concat(l.Smz(e.points,(function(e){return null===e||void 0===e?void 0:e.count})),'</b> stations</span>\n            </div>\n            <div class="overlay-content">\n            <table>\n                <tbody><tr>').concat(e.points.slice().sort((function(e,n){return(null===n||void 0===n?void 0:n.count)-(null===e||void 0===e?void 0:e.count)})).map((function(e){return"<td>[".concat(null===e||void 0===e?void 0:e.count,"]</td><td>").concat(e.title,"</td>")})).join("</tr><tr>"),"</tr></tbody>\n            </table>\n            </div>\n          </div>")}),[]),onHexClick:function(e){var n,t=[];e.points.forEach((function(e){t.push(e.city)})),m({city:t,country:[null===(n=e.points[0])||void 0===n?void 0:n.country]})},onGlobeClick:ne})}),k&&(0,v.jsx)(c.h,{container:k.current,children:(0,v.jsx)(u.Z,{onClick:le,children:(0,v.jsx)(s.Z,{})})})]})})),j=Z},78305:function(e,n,t){t.d(n,{X:function(){return i},e:function(){return r}});t(72426);var i=[{accessorKey:"city",header:"City"},{accessorKey:"country",header:"Country"},{accessorKey:"station",header:"Station"},{accessorKey:"station_genre",header:"Station Genre"},{accessorKey:"stream_artist",header:"Artist",dynamic:!0},{accessorKey:"stream_song",header:"Song",dynamic:!0}],r=i.filter((function(e){return!e.filterDisable}))},4583:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var i=t(1413),r=t(72791),o=t(7538),a=t.n(o),l=t(79397),c=t.n(l),u=t(11015),s=t(61862),d=t(42404),f=t(57689),g=t(93539),m=t(80349),h=t(11068),v=t(95321),p=t(76019),x=t(22779),y=t(32815),b=t(92392),C=t(6058),Z=t(69550),j=t(77111),k=t(91490),T=t(95074),I=t(16737),M=t(1116),S=t(8712),L=t(56309),w=t(91891),R=t(45987),A=t(29439),E=t(78687),B=t(49079),K=(t(69824),t(80915)),z=t(36314),D=t(93006),P=t(46314),_=t(78305),O=t(20250),U=t(77262),Y=t(80184),F=["children","role"],H=r.forwardRef((function(e,n){var t=e.children,o=e.role,a=(0,R.Z)(e,F),l=Array.isArray(t)?t.length:0,c=(0,r.useRef)(null);return(0,Y.jsx)("div",{ref:n,role:o,children:(0,Y.jsx)("div",(0,i.Z)((0,i.Z)({},a),{},{ref:c,children:(0,Y.jsx)(U.ViewportList,{viewportRef:c,items:t,count:l,children:function(e){var n=e.props,t=e.type;return(0,r.createElement)(t,(0,i.Z)((0,i.Z)({},n),{},{key:n.id}))}})}))})})),V=["onInputChange"],W=(0,K.D)(),N=function(e,n){return W(e,n).slice(0,50)};function G(){var e=(0,E.v9)(B.mj),n=(0,E.I0)(),t=(0,r.useState)({}),o=(0,A.Z)(t,2),a=o[0],l=o[1],c=(0,O.Wz)(),u=c.isLoading,s=c.searchByStream,d=c.getList,f=d("fields");return(0,r.useEffect)((function(){l((0,i.Z)({},f))}),[f]),(0,Y.jsx)(z.Z,{spacing:2,padding:2,children:_.e.map((function(t){var r,o;return(0,Y.jsx)(X,{multiple:!0,size:"small",limitTags:2,filterOptions:N,ListboxComponent:H,freeSolo:!0,options:null!==(r=t.dynamic?d("search-".concat(t.accessorKey)):a[t.accessorKey])&&void 0!==r?r:[],loading:!!t.dynamic&&u("search-".concat(t.accessorKey)),getOptionLabel:function(e){return e},value:null!==(o=e[t.accessorKey])&&void 0!==o?o:[],onChange:function(e,i){n((0,B.Tv)({key:t.accessorKey,value:i}))},onInputChange:t.dynamic?function(e,n){n&&""!==n&&s(t.accessorKey,n)}:void 0,renderInput:function(e){return(0,Y.jsx)(D.Z,(0,i.Z)((0,i.Z)({},e),{},{label:t.header}))}},t.accessorKey)}))})}function X(e){var n=e.onInputChange,t=void 0===n?function(){}:n,o=(0,R.Z)(e,V),a=r.useState(""),l=(0,A.Z)(a,2),c=l[0],u=l[1];return(0,Y.jsx)(P.Z,(0,i.Z)({inputValue:c,onInputChange:function(e,n,i){u(n),t(e,n,i)},onBlur:function(){u("")}},o))}var $=t(24308),q=t(88588),J=t(4567),Q=t(26719),ee=t(75483),ne=t(84254);(0,ee.BYU)().range([.1,1]);function te(){var e=(0,O.Wz)(),n=e.getFuncCollection,t=(0,e.getList)("countries"),i=(0,r.useMemo)((function(){return(0,ee.BYU)().range([.1,1]).domain((0,ee.Wem)(t,(function(e){return null===e||void 0===e?void 0:e.count})))}),[t]),o=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ececec",n=(0,ee.PKp)(ne.xB),t=function(t){if(!t||""===t||""===t.trim)return"black";var i=n.domain();return i.find((function(e){return e===t}))||i.length<ne.GS?n(t):e};return t.domain=n.domain,t.range=n.range,t}()}),[]);return(0,Y.jsx)($.Z,{children:(0,Y.jsx)(z.Z,{m:1,style:{maxHeight:"30vh",overflowY:"auto"},children:(0,Y.jsx)(q.Z,{sx:{pointerEvents:"all",overflowY:"auto",backgroundColor:function(e){return(0,Q.x)(e.palette.background.paper)}},children:(0,Y.jsxs)(z.Z,{sx:{m:1,p:0},children:[(0,Y.jsx)(J.Z,{children:"Top Stations by Country"}),t.map((function(e){var t;return(0,Y.jsxs)(J.Z,{variant:"subtitle2",onClick:function(){n("selectCountry")(e)},children:[(0,Y.jsx)("div",{style:{width:50*(null!==(t=i(e.count))&&void 0!==t?t:1),height:10,backgroundColor:o(e.title),display:"inline-block",marginRight:5}}),e.title]},e.title)}))]})})})})}var ie=t(60183),re=t(5849),oe=t(68087),ae=t(65370);function le(e){var n=e.title,t=e.onChange;return(0,Y.jsxs)(z.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[n,(0,Y.jsxs)(ie.Z,{size:"small",variant:"outlined","aria-label":"outlined button group",sx:{color:"unset"},children:[(0,Y.jsx)(re.Z,{sx:{color:"unset"},onClick:function(){return t(!0)},children:(0,Y.jsx)(oe.Z,{})}),(0,Y.jsx)(re.Z,{sx:{color:"unset"},onClick:function(){return t(!1)},children:(0,Y.jsx)(ae.Z,{})})]})]})}var ce=function(e){var n=e.intl,t=e.updateLocale,i=e.locale,r=e.menuContext,o=e.themeContext,a=e.a2HSContext,l=e.auth,c=e.openAbout,u=e.changeFontSize,s=r.toggleThis,d=r.isDesktop,f=(r.isAuthMenuOpen,r.isMiniSwitchVisibility),g=o.themeID,m=o.setThemeID,h=o.isRTL,v=(o.fontSize,o.toggleThisTheme),R=(o.setFontSize,l.auth),A=(l.setAuth,a.isAppInstallable),E=a.isAppInstalled,B=a.deferredPrompt,K=L.Z.map((function(e){return{value:void 0,visible:!0,primaryText:n.formatMessage({id:e.locale}),onClick:function(){t(e.locale)},leftIcon:(0,Y.jsx)(p.Z,{})}})),z=R.isAuthenticated,D=w.Z.map((function(e){return{value:void 0,visible:!0,primaryText:n.formatMessage({id:e.id}),onClick:function(){m(e.id)},leftIcon:(0,Y.jsx)(x.Z,{style:{color:e.color}})}}));return[{value:null,onClick:function(){},primaryText:n.formatMessage({id:"search",defaultMessage:"Search"}),leftIcon:(0,Y.jsx)(y.Z,{}),primaryTogglesNestedList:!0,nestedItems:[{primaryText:(0,Y.jsx)(G,{})},{primaryText:(0,Y.jsx)(te,{})}]},{value:"/",visible:z,primaryText:n.formatMessage({id:"home"}),leftIcon:(0,Y.jsx)(b.Z,{})},{value:null,visible:!0,primaryText:n.formatMessage({id:"about"}),leftIcon:(0,Y.jsx)(C.Z,{}),onClick:c},{divider:!0},{primaryText:n.formatMessage({id:"settings"}),primaryTogglesNestedList:!0,leftIcon:(0,Y.jsx)(Z.Z,{}),nestedItems:[{primaryText:(0,Y.jsx)(le,{title:n.formatMessage({id:"Font size"}),onChange:u}),leftIcon:(0,Y.jsx)(j.Z,{})},{primaryText:n.formatMessage({id:"theme"}),secondaryText:n.formatMessage({id:g}),primaryTogglesNestedList:!0,leftIcon:(0,Y.jsx)(x.Z,{}),nestedItems:D},{primaryText:n.formatMessage({id:"language"}),secondaryText:n.formatMessage({id:i}),primaryTogglesNestedList:!0,leftIcon:(0,Y.jsx)(p.Z,{}),nestedItems:K},{visible:!!d,onClick:function(){s("isMiniSwitchVisibility")},primaryText:n.formatMessage({id:"menu_mini_mode"}),leftIcon:f?(0,Y.jsx)(k.Z,{}):(0,Y.jsx)(T.Z,{})},{onClick:function(){v("isRTL")},primaryText:"".concat(h?"LTR":"RTL"," mode"),leftIcon:h?(0,Y.jsx)(I.Z,{}):(0,Y.jsx)(M.Z,{})}]},{value:null,visible:A&&!E,onClick:function(){B.prompt()},primaryText:n.formatMessage({id:"install",defaultMessage:"Install"}),leftIcon:(0,Y.jsx)(S.Z,{})}]},ue=t(97718),se=function(e){var n=(0,g.Z)(),t=(0,f.s0)(),r=(0,f.TH)(),o=(0,s.aC)(),l=(0,h.useMenu)(),p=(0,u.OA)(),x=l||{},y=x.toggleThis,b=x.isMiniMode,C=x.isMiniSwitchVisibility,Z=(0,d.useConfig)().appConfig,j=(0,m.useLocale)(),k=j.setLocale,T=j.locale,I=void 0===T?"en":T,M=(0,v.useTheme)(),S=(0,E.I0)(),L=ce((0,i.Z)({intl:n,locale:I,updateLocale:k,menuContext:l,themeContext:M,appConfig:Z,a2HSContext:p,auth:o,openAbout:function(){S({type:ue.O5,opened:!0})},changeFontSize:function(e){S(e?{type:ue.eR}:{type:ue.zU})}},e)).filter((function(e){return!1!==e.visible})),w=r?r.pathname:"/";return(0,Y.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:(0,Y.jsx)(a(),{style:{flex:1},children:(0,Y.jsx)(c(),{onIndexChange:function(e,n){void 0!==n&&y("isMobileMenuOpen",!1),void 0!==n&&n!==Object(n)&&t(n)},useMinified:b,items:L,index:w},C+M.isRTL)})})}},26719:function(e,n,t){t.d(n,{x:function(){return a}});var i=t(1413),r=t(36395),o=t(75483);function a(e){var n=(0,o.$_Y)(e);return n.opacity=.5,n.toString()}n.Z=function(e,n,t,o,a){if(n)for(var l=0;l<n.length;l++)if(n[l].id===e){var c=n[l].source,u=null!=c&&c instanceof Function?c(t?"dark":"light",a):c,s=null!=u?u.palette:{};return(0,r.Z)((0,i.Z)((0,i.Z)({},u),{},{palette:(0,i.Z)((0,i.Z)({},s),{},{mode:t?"dark":"light"}),direction:o?"rtl":"ltr"}))}return(0,r.Z)({palette:{mode:t?"dark":"light"},direction:o?"rtl":"ltr"})}}}]);
//# sourceMappingURL=909.cccd0db6.chunk.js.map