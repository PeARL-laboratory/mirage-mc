"use strict";(self.webpackChunkmirage_mc=self.webpackChunkmirage_mc||[]).push([[37],{14101:function(t,e,n){n.d(e,{ZP:function(){return p},Wz:function(){return x}});var a=n(72791),i=a.createContext(null),r=n(80184),o=n(29439),s=n(4942),l=n(1413),c=n(84136),u=n(763),d=n.p+"static/media/stations_listed.62a01fcccd6c8d8910be.csv",f=n.p+"static/media/locations_listed.f85c1cdb7238c3b3b584.csv",h=n.p+"static/media/metadata.508f1effc7264ccc4778.csv",g=n.p+"static/media/streamDetail.2db5fb2c64b18016cd7d.csv";function v(t,e){var n=e.type,a=e.path,i=e.isLoading,r=void 0!==i&&i,o=e.error,c=void 0!==o&&o,u=e.hasError,d=void 0!==u&&u,f=e.value;switch(n){case"LOADING_CHANGED":return(0,l.Z)((0,l.Z)({},t),{},(0,s.Z)({},a,(0,l.Z)((0,l.Z)({},t[a]),{},{isLoading:r})));case"VALUE_CHANGE":return(0,l.Z)((0,l.Z)({},t),{},(0,s.Z)({},a,(0,l.Z)((0,l.Z)({},t[a]),{},{value:f,isLoading:r,error:c,hasError:d})));case"INIT":return(0,l.Z)((0,l.Z)({},t),{},{isInit:f});default:throw new Error}}var m={rawData:{value:{stationData:[],locationData:[],metaData:[],streamDetail:[]}},locs:{},countries:{},events:{},loading:!1,error:!1,isInit:!1},p=function(t){var e=t.children,n=(0,a.useReducer)(v,m),s=(0,o.Z)(n,2),p=s[0],x=s[1];(0,a.useEffect)((function(){if(!p.rawData.isLoading&&!p.rawData.value.metaData.length){1;try{console.time("Load and process data"),console.time("-Load data-"),x({type:"LOADING_CHANGED",path:"rawData",isLoading:!0}),x({type:"LOADING_CHANGED",path:"locs",isLoading:!0}),x({type:"LOADING_CHANGED",path:"countries",isLoading:!0}),Promise.all([(0,c.gyn)(d),(0,c.gyn)(f),(0,c.gyn)(h),(0,c.gyn)(g)]).then((function(t){var e=(0,o.Z)(t,4),n=e[0],a=e[1],i=e[2],r=e[3];console.timeEnd("-Load data-"),console.time("-Correct data-");var s={};a.forEach((function(t){t.lat=+t.longitude,t.long=+t.latitude,delete t.longitude,delete t.latitude,s[t.city_id]=t}));var u={};n.forEach((function(t){t.lat=s[t.city_id].lat,t.long=s[t.city_id].long,t.country=s[t.city_id].country,t.city=s[t.city_id].city,u[t.station_id]=t})),i.forEach((function(t){t.station_genre=u[t.station_id].station_genre,t.city=s[t.city_id].city,t.country=s[t.city_id].country,t.station=u[t.station_id].station,t.stream_artist=r[t.stream_detail_id].stream_artist,t.stream_song=r[t.stream_detail_id].stream_song}));var d={stationData:n,locationData:a,metaData:i,streamDetail:r,stationDataMap:u,locationDataMap:s};x({type:"VALUE_CHANGE",path:"rawData",value:d,isLoading:!1}),console.timeEnd("-Correct data-"),console.time("-filterdata-");var f=function(t){var e=t.stationData,n=t.locationData,a=t.metaData,i=(0,c.Xxj)(e,(function(t){return t.city_id}));console.time("---group meta---");var r=(0,c.ruo)(n,(function(t){return t.city_id})),o=(0,c.ruo)(a,(function(t){return t.city_id}));console.timeEnd("---group meta---");var s=i.map((function(t){var e,n,a,i=null!==(e=o.get(t[0]))&&void 0!==e?e:[],s=null!==(n=(null!==(a=r.get(t[0]))&&void 0!==a?a:[])[0])&&void 0!==n?n:{};return(0,l.Z)((0,l.Z)({},s),{},{title:"".concat(s.city," - ").concat(s.country),count:t[1].length,values:t[1],city:[[s.city,i]].map((function(t){return t.title=t[0],t.count=t[1].length,t}))})}));return s.sort((function(t,e){return e.count-t.count})),{locs:s,countries:(0,c.Xxj)(e,(function(t){return t.country})).map((function(t){return{title:t[0],long:(0,c.J69)(t[1],(function(t){return t.long})),lat:(0,c.J69)(t[1],(function(t){return t.lat})),count:t[1].length,values:t[1]}})).sort((function(t,e){return e.count-t.count}))}}(d),h=f.locs,g=f.countries;x({type:"VALUE_CHANGE",path:"locs",value:h,isLoading:!1}),x({type:"VALUE_CHANGE",path:"countries",value:g,isLoading:!1}),console.timeEnd("-filterdata-"),console.timeEnd("Load and process data")}))}catch(t){x({type:"ERROR",path:"rawData",isLoading:!1,error:t,hasError:!0}),x({type:"ERROR",path:"locs",isLoading:!1,error:t,hasError:!0}),x({type:"ERROR",path:"countries",isLoading:!1,error:t,hasError:!0})}}}),[]);var b=(0,a.useCallback)((function(t){return!!p[t]&&p[t].error}),[p]),y=(0,a.useCallback)((function(t){return p[t]&&p[t].value?p[t].value:[]}),[p]),D=(0,a.useCallback)((function(t){switch(t){case"city":return p.rawData&&p.rawData.value.locationData?p.rawData.value.locationData.map((function(t){return t.city})):[];case"country":return p.countries&&p.countries.value?p.countries.value.map((function(t){return t.title})):[];case"station":return p.rawData&&p.rawData.value.stationData?(0,u.uniq)(p.rawData.value.stationData.map((function(t){return t.station}))):[];case"station_genre":return p.rawData&&p.rawData.value.metaData?(0,u.uniq)(p.rawData.value.metaData.map((function(t){return t.station_genre}))):[];case"stream_artist":return p.rawData&&p.rawData.value.streamDetail?(0,u.uniq)(p.rawData.value.streamDetail.map((function(t){return t.stream_artist}))):[];case"stream_song":return p.rawData&&p.rawData.value.streamDetail?(0,u.uniq)(p.rawData.value.streamDetail.map((function(t){return t.stream_song}))):[];default:return[]}}),[p]),j=(0,a.useCallback)((function(){return p.events&&p.events.value?p.events.value:[]}),[p]),w=(0,a.useCallback)((function(t,e){x({type:"LOADING_CHANGED",path:"events",isLoading:!0}),new Promise((function(n,a){var i,r=(null!==(i=p.rawData.value)&&void 0!==i?i:{metaData:[]}).metaData.slice();Object.keys(t).forEach((function(e){t[e]&&r.length&&((0,u.isArray)(t[e])?t[e].length&&(r=r.filter((function(n){return t[e].find((function(t){return t===n[e]}))}))):t[e]&&(r=r.filter((function(n){return n[e]===t[e]}))))}));var o=r.slice(0,e);x({type:"VALUE_CHANGE",path:"events",value:o,isLoading:!1}),n(o)}))}),[p]),_=(0,a.useCallback)((function(t){var e=(p.events&&p.events.value?p.events.value:[]).find((function(e){return e.stream_detail_id===t}));return e?Z(e,p.rawData.value.stationDataMap,p.rawData.value.locationDataMap,p.rawData.value.streamDetail):null}),[p]);function Z(t,e,n,a){return(0,l.Z)((0,l.Z)({},t),{},{station_description:e[t.station_id].station_description,station_url:e[t.station_id].station_url,lat:n[t.city_id].lat,long:n[t.city_id].long,url:e[t.station_id].url},a[t.stream_detail_id])}var C=(0,a.useCallback)((function(t){var e;if(t){var n,a=(null!==(n=p.rawData.value)&&void 0!==n?n:{metaData:[]}).metaData;return t.sort((function(t,e){return t-e})).map((function(t){return Z(a[t],p.rawData.value.stationDataMap,p.rawData.value.locationDataMap,p.rawData.value.streamDetail)}))}return(null!==(e=p.rawData.value)&&void 0!==e?e:{metaData:[]}).metaData.map((function(t){return Z(t,p.rawData.value.stationDataMap,p.rawData.value.locationDataMap,p.rawData.value.streamDetail)}))}),[p]),E=(0,a.useCallback)((function(t){return!!p[t]&&p[t].isLoading}),[p]);return(0,r.jsx)(i.Provider,{value:{getList:y,getEvents:j,requestEvents:w,getDistinctField:D,getDetail:_,getListError:b,getDownloadData:C,isLoading:E},children:e})};function x(){return(0,a.useContext)(i)}},78305:function(t,e,n){n.d(e,{X:function(){return a},e:function(){return i}});var a=[{accessorKey:"city",header:"City"},{accessorKey:"country",header:"Country"},{accessorKey:"station",header:"Station"},{accessorKey:"station_genre",header:"Station Genre"},{accessorKey:"stream_artist",header:"Artist"},{accessorKey:"stream_song",header:"Song"},{accessorKey:"time_station",header:"Time",filterDisable:!0}],i=a.filter((function(t){return!t.filterDisable}))},28605:function(t,e,n){n.r(e),n.d(e,{default:function(){return st}});var a=n(29439),i=n(72791),r=n(93539),o=n(1413),s=n(95321),l=n(74350),c=n(13967),u=n(42404),d=n(24003),f=n(25256),h=n(29464),g=n(90977),v=n(4567),m=n(40986),p=n(7607),x=n(99631),b=n(80184);function y(t){var e=t.children,n=t.pageTitle,a=t.onBackClick,y=t.isLoading,D=t.appBarContent,j=void 0===D?null:D,w=t.contentStyle,_=t.tabs,Z=void 0===_?null:_,C=(0,s.useTheme)().isRTL,E=(0,d.useOnline)(),k=(0,c.Z)(),L=((0,u.useConfig)().appConfig||{}).menu||{},R=L.width,S=void 0===R?240:R,A=L.appBarLeadingContent,I=void 0===A?null:A,P=(0,i.useContext)(l.default),M=P.toggleThis,z=P.isDesktop,T=P.isMenuOpen,G=(0,r.Z)(),N="";("string"===typeof n||n instanceof String)&&(N=n);return(0,b.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[(0,b.jsx)(f.Z,{position:z?"absolute":void 0,sx:{width:T&&z?"calc(100% - ".concat(S,"px)"):void 0,zIndex:k.zIndex.drawer,transition:k.transitions.create(["width","margin"],{easing:k.transitions.easing.sharp,duration:k.transitions.duration.leavingScreen}),maxHeight:64,marginLeft:C?0:-12,marginRight:C?30:0,backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},children:(0,b.jsxs)(h.Z,{children:[T&&z||!a&&(0,b.jsx)(g.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){T?M("isMobileMenuOpen"):(M("isMiniMode",!1),M("isMenuOpen",!0),z||M("isMobileMenuOpen"))},edge:"start",children:(0,b.jsx)(p.Z,{})}),a&&(0,b.jsx)(g.Z,{color:"inherit","aria-label":"open drawer",onClick:a,children:(0,b.jsx)(x.Z,{})}),!a&&T&&!1,I,(0,b.jsx)(v.Z,{variant:"h6",color:"inherit",noWrap:!0,children:N}),(0,b.jsx)("div",{style:{flex:"1 1 auto"}}),j]})}),(0,b.jsx)("div",{style:{alignItems:"center",justifyContent:"flex-end",minHeight:64}}),y&&(0,b.jsx)(m.Z,{}),!E&&(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",height:15,backgroundColor:k.palette.secondary.main},children:(0,b.jsx)(v.Z,{variant:"caption",color:"textSecondary",noWrap:!0,children:G.formatMessage({id:"offline",defaultMessage:"Offline"})})}),Z,(0,b.jsx)("div",{style:(0,o.Z)({flex:1,overflow:"auto"},w),children:e})]})}var D=n(14101),j=n(34729),w=n(88588),_=n(22492),Z=n(18060),C=n(64554),E=n.p+"static/media/earth-night.da273783100dfbfd07c0.jpg",k=n(51692),L=n(84136),R=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],S=L.BYU().range([.01,.7]),A=L.BYU().range([.1,.7]),I=(0,i.forwardRef)((function(t,e){var n=t.locs,r=t.countries,o=t.width,s=t.height,l=t.onSelect,c=t.zoomLoc,u=(0,i.useRef)(),d=(0,i.useState)("country"),f=(0,a.Z)(d,2),h=f[0],g=(f[1],(0,i.useState)()),v=(0,a.Z)(g,2),m=v[0],p=(v[1],(0,i.useState)(0)),x=(0,a.Z)(p,2),y=x[0],D=x[1],j=(0,i.useState)([{lat:-92.52824601944323,lng:38.31079101844495,altitude:1.8},{lat:51.58421865,lng:45.9571029,altitude:1.8},{lat:31.3037101,lng:-89.29276214,altitude:1.8},{lat:33.5842591,lng:-101.8804709,altitude:1.8}]),w=(0,a.Z)(j,2),_=w[0],Z=w[1],C=(0,i.useState)([]),I=(0,a.Z)(C,2),P=I[0],M=I[1],z=(0,i.useMemo)((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#454545",e=L.PKp(R),n=function(n){if(!n||""===n||""===n.trim)return"black";var a=e.domain();return a.find((function(t){return t===n}))||a.length<20?e(n):t};return n.domain=e.domain,n.range=e.range,n}()}),[]);function T(t){var e=t.locs,n=t.countries,a=L.Wem(e,(function(t){return t.count}));S.domain(a),A.domain(L.Wem(n,(function(t){return t.count}))),z.domain([]).range(R),n.forEach((function(t){return z(t.title)}));var i=0;return n.length>3&&[0,1,2,3,0].forEach((function(t){_[i]||(_[i]={lat:0,lng:0,altitude:1}),_[i].lat=n[t].lat,_[i].lng=n[t].long,i++})),{MAP_CENTERs:_}}(0,i.useEffect)((function(){var t=T({locs:n,countries:r}).MAP_CENTERs;Z(t),c||D(0)}),[n,r]);var G=(0,i.useState)(null),N=(0,a.Z)(G,2),O=N[0],B=N[1];(0,i.useEffect)((function(){if(u.current&&y<_.length){var t=setTimeout((function(){u.current.pointOfView(_[y],4e3),D(y+1)}),4e3);return B(t),function(){clearInterval(t)}}}),[y,_]);var H=(0,i.useCallback)((function(){O&&clearInterval(O),D(_.length)}),[O]),U=(0,i.useState)(null),F=(0,a.Z)(U,2),V=F[0],W=F[1],q=(0,i.useCallback)((function(t,e){if(u.current){H(),u.current.pointOfView({lat:e,lng:t,altitude:1.2},2e3),M([{lng:t,lat:e}]),V&&clearInterval(V);var n=setTimeout((function(){M([])}),1e4);W(n)}}),[y,H,V]);return(0,i.useEffect)((function(){return c&&q(c.lng,c.lat),function(){V&&clearInterval(V)}}),[c]),(0,b.jsx)("div",{style:{background:"#000010",position:"relative"},children:(0,b.jsx)("div",{style:{transform:"translate(0, -20%)",height:"100vh"},children:(0,b.jsx)(k.Z,{width:o,height:s,ref:u,globeImageUrl:E,ringsData:P,ringColor:function(){return"#D39F49"},ringResolution:1e3,ringMaxRadius:5,ringPropagationSpeed:5,ringRepeatPeriod:500,labelsData:r,labelLat:(0,i.useCallback)((function(t){return t.lat}),[]),labelLng:(0,i.useCallback)((function(t){return t.long}),[]),labelAltitude:(0,i.useCallback)((function(t){return m&&m.title===t.title?.15:.1}),[m]),labelText:(0,i.useCallback)((function(t){return t.title}),[]),labelSize:(0,i.useCallback)((function(t){return S(t.count)/3}),[]),labelDotRadius:0,labelColor:(0,i.useCallback)((function(t){var e;return m&&m.title===t.title?"#dd6700":null!==(e=t.color)&&void 0!==e?e:"white"}),[m]),labelResolution:2,hexBinPointsData:n,hexBinPointWeight:"count",hexBinPointLng:(0,i.useCallback)((function(t){return t.long}),[]),hexBinPointLat:(0,i.useCallback)((function(t){return t.lat}),[]),hexAltitude:(0,i.useCallback)((function(t){return S(t.sumWeight)}),[]),hexBinResolution:4,hexTopColor:(0,i.useCallback)((function(t){return z(t.points[0][h])}),[]),hexSideColor:(0,i.useCallback)((function(t){return z(t.points[0][h])}),[]),hexBinMerge:!1,hexLabel:(0,i.useCallback)((function(t){return'<div class="overlay-holder">\n            <div class="overlay-header">\n                <span><b>'.concat(L.Smz(t.points,(function(t){return t.count})),'</b> stations</span>\n            </div>\n            <div class="overlay-content">\n            <table>\n                <tbody><tr>').concat(t.points.slice().sort((function(t,e){return e.count-t.count})).map((function(t){return"<td>[".concat(t.count,"]</td><td>").concat(t.title,"</td>")})).join("</tr><tr>"),"</tr></tbody>\n            </table>\n            </div>\n          </div>")}),[]),onHexClick:function(t){console.log(t.points[0]);var e=[];t.points.forEach((function(t){t.city.forEach((function(t){return e.push(t[0])}))})),l({city:e,country:[t.points[0].country]})},onGlobeClick:H})})})})),P=I,M=n(56525),z=n(19628),T=(n(28920),n(78305)),G=n(5849),N=n(65560),O=n(76730),B=function(t){var e=t.data,n=t.onSelectRow,r=t.highlightId,o=T.X,s=(0,i.useRef)(null),l=(0,i.useState)(!1),c=(0,a.Z)(l,2),u=c[0],d=c[1],f=(0,i.useState)([]),h=(0,a.Z)(f,2),g=h[0],v=h[1],m=(0,D.Wz)().getDownloadData;(0,i.useEffect)((function(){var t;null===(t=s.current)||void 0===t||t.scrollToIndex(0)}),[g]);return(0,b.jsx)(z.ZP,{columns:o,data:e,enableBottomToolbar:!1,enableGlobalFilterModes:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,muiTableContainerProps:{sx:{maxHeight:"300px"}},initialState:{density:"compact"},onSortingChange:v,state:{isLoading:u,sorting:g},rowVirtualizerInstanceRef:s,rowVirtualizerProps:{overscan:8},muiTableBodyRowProps:function(t){var e=t.row;return{onClick:function(){n(e.original)},sx:{cursor:"pointer",opacity:r?r.stream_detail_id===e.original.stream_detail_id?1:.7:1}}},enableColumnResizing:!0,defaultColumn:{minSize:20,maxSize:9001,size:100},renderTopToolbarCustomActions:function(t){var e=t.table;return(0,b.jsxs)(C.Z,{sx:{display:"flex",gap:"1rem",p:"0.5rem",flexWrap:"wrap"},children:[(0,b.jsx)(G.Z,{color:"primary",target:"_blank",href:"https://texastechuniversity-my.sharepoint.com/:x:/g/personal/ngan_v_t_nguyen_ttu_edu/EWEu7l96MQ1Jgu8OBKspIR0BjmY1i0t6XlV6ROPCYcPkkA?download=1",startIcon:(0,b.jsx)(N.Z,{}),variant:"contained",children:"Download All Data"}),(0,b.jsx)(G.Z,{disabled:0===e.getPrePaginationRowModel().rows.length,onClick:function(){return function(t){d(!0);var e=m(t.map((function(t){return t.original.stream_detail_id}))),n={fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,filename:"mirage-mc-".concat((new Date).toDateString()),useBom:!0,useKeysAsHeaders:!0};new O.ExportToCsv(n).generateCsv(e),d(!1)}(e.getPrePaginationRowModel().rows)},startIcon:(0,b.jsx)(N.Z,{}),variant:"contained",children:"Export Current Data"})]})}})},H=n(65469),U=n(94721),F=n(60220),V=n(72426),W=n.n(V),q=n(14642);var K=function(t){var e=t.data,n=t.onSelect;return(0,b.jsx)(w.Z,{sx:{height:"100%",overflowY:"auto"},children:(0,b.jsxs)(_.Z,{children:[(0,b.jsx)(v.Z,{component:"div",variant:"h2",onClick:function(){return n({station:[e.station]},e)},children:e.station}),(0,b.jsx)(v.Z,{component:"div",variant:"subtitle1",color:"text.secondary",children:e.station_description}),(0,b.jsxs)("table",{style:{width:"100%"},children:[(0,b.jsxs)("colgroup",{children:[(0,b.jsx)("col",{style:{width:130}}),(0,b.jsx)("col",{})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Station Genre"}),(0,b.jsx)("td",{children:e.station_genre})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Station URL"}),(0,b.jsx)("td",{children:(0,b.jsx)(H.Z,{href:e.station_url,target:"_blank",color:"secondary",children:e.station_url})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Location"}),(0,b.jsx)("td",{children:(0,b.jsxs)(H.Z,{target:"_blank",color:"secondary",href:"https://maps.google.com/?q=".concat(e.lat,",").concat(e.long),children:[(0,b.jsx)(q.Z,{}),e.city,", ",e.country]})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Radio Garden URL"}),(0,b.jsx)("td",{children:(0,b.jsx)(H.Z,{href:e.url,target:"_blank",color:"secondary",children:e.station_url})})]}),(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colspan:"2",children:(0,b.jsx)(U.Z,{sx:{mt:2,mb:2}})})}),(0,b.jsxs)("tr",{onClick:function(){return n({stream_artist:[e.stream_artist]})},children:[(0,b.jsx)("td",{children:"Artist"}),(0,b.jsxs)("td",{style:{display:"flex"},children:[(0,b.jsx)(F.Z,{"aria-label":"recipe",sx:{mr:1},children:e.stream_artist[0]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(v.Z,{variant:"h5",color:"text.primary",children:e.stream_artist}),(0,b.jsx)(v.Z,{variant:"subtitle2",children:"N/A"})]})]})]}),(0,b.jsxs)("tr",{onClick:function(){return n({stream_song:[e.stream_song]})},children:[(0,b.jsx)("td",{children:"Song"}),(0,b.jsx)("td",{children:e.stream_song})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Time Monitored"}),(0,b.jsx)("td",{children:W()(e.time_station).format("LLL")})]})]})]})})},Y=n(4942),X=n(66934),J=n(12065),$=n(40139);(0,X.ZP)("div")((function(t){var e=t.theme;return(0,Y.Z)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,J.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,J.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),(0,X.ZP)("div")((function(t){return{padding:t.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),(0,X.ZP)($.ZP)((function(t){var e=t.theme;return{color:"inherit","& .MuiInputBase-input":(0,Y.Z)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));var Q=n(69824),tt=n(78687),et=n(43416),nt=n(70492),at=function(t){var e=t.canUndo,n=t.canRedo,a=t.onUndo,i=t.onRedo;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Z,{onClick:a,disabled:!e,children:(0,b.jsx)(et.Z,{})}),(0,b.jsx)(g.Z,{onClick:i,disabled:!n,children:(0,b.jsx)(nt.Z,{})})]})},it={onUndo:Q.zF.undo,onRedo:Q.zF.redo},rt=at=(0,tt.$j)((function(t){return{canUndo:t.streamFilters.past.length>0,canRedo:t.streamFilters.future.length>0}}),it)(at),ot=n(49079),st=function(){var t=(0,tt.I0)(),e=((0,r.Z)(),(0,tt.v9)(ot.mj)),n=(0,D.Wz)(),o=n.getList,s=n.isLoading,l=n.getEvents,c=n.requestEvents,u=n.getDetail,d=(0,i.useState)(),f=(0,a.Z)(d,2),h=f[0],g=f[1],p=(0,i.useState)(),x=(0,a.Z)(p,2),E=x[0],k=x[1],L=(0,i.useRef)();(0,i.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){k({lng:t.coords.longitude,lat:t.coords.latitude})}),(function(){}))}),[]);var R=s("rawData"),S=(s("events"),s("locs"));(0,i.useEffect)((function(){R||c(e,1e3)}),[R,e]);var A=(0,i.useCallback)((function(t){var e=t.stream_detail_id,n=u(e);g(n),k({lng:n.long,lat:n.lat})}),[l]),I=function(e,n){n&&k({lng:n.long,lat:n.lat}),t((0,ot.rr)({value:e}))};return(0,b.jsxs)(y,{appBarContent:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(rt,{})}),children:[(0,b.jsx)("div",{style:{position:"absolute",top:0,left:0,zIndex:0,height:"100%",width:"100%",overflow:"hidden"},children:(0,b.jsx)(M.Z,{style:{height:"100%",width:"100%"},children:function(t){var e=t.height,n=t.width;return(0,b.jsx)(P,{locs:o("locs"),countries:o("countries"),onSelect:I,width:n,height:e,ref:L,zoomLoc:E})}})}),(0,b.jsxs)(j.Z,{container:!0,sx:{height:"100%",position:"relative",pointerEvents:"none"},direction:"column",justifyContent:"space-between",children:[(0,b.jsx)(j.Z,{sx:{pointerEvents:"none"}}),(0,b.jsxs)(j.Z,{container:!0,spacing:2,m:0,sx:{pointerEvents:"auto",maxHeight:450},alignItems:"end",children:[(0,b.jsx)(j.Z,{item:!0,xs:8,children:(0,b.jsx)(w.Z,{sx:{minHeight:275,backgroundColor:function(t){return lt(t.palette.background.paper)}},children:(0,b.jsxs)(_.Z,{children:[(0,b.jsx)(v.Z,{children:"Event list"}),(0,b.jsx)(B,{data:l(),onSelectRow:A,highlightId:h})]})})}),h&&(0,b.jsx)(j.Z,{item:!0,xs:4,sx:{height:"100%"},children:(0,b.jsx)(w.Z,{sx:{height:"100%",backgroundColor:function(t){return lt(t.palette.background.paper)}},children:(0,b.jsx)(_.Z,{sx:{height:"100%"},children:(0,b.jsx)(K,{data:h,onSelect:I})})})})]})]}),(0,b.jsx)(Z.Z,{sx:{color:"#fff",zIndex:function(t){return t.zIndex.drawer+1}},open:R||S,children:(0,b.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",width:"50%",flexDirection:"column",textAlign:"center"},children:[(0,b.jsx)(C.Z,{sx:{width:"100%"},children:(0,b.jsx)(m.Z,{variant:"determinate",value:R?40:S?90:100})}),(0,b.jsx)(C.Z,{sx:{width:"100%"},children:(0,b.jsx)("h2",{children:R?"Read data....":S?"Process data...":"Done!"})})]})})]})};function lt(t){var e=(0,L.$_Y)(t);return e.opacity=.5,e.toString()}}}]);
//# sourceMappingURL=37.5f320d82.chunk.js.map